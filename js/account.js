(()=>{var rr=Object.defineProperty,or=Object.defineProperties;var sr=Object.getOwnPropertyDescriptors;var jt=Object.getOwnPropertySymbols,lr=Object.getPrototypeOf,ir=Object.prototype.hasOwnProperty,nr=Object.prototype.propertyIsEnumerable,ur=Reflect.get;var Xt=(o,a,e)=>a in o?rr(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e,Qe=(o,a)=>{for(var e in a||(a={}))ir.call(a,e)&&Xt(o,e,a[e]);if(jt)for(var e of jt(a))nr.call(a,e)&&Xt(o,e,a[e]);return o},Kt=(o,a)=>or(o,sr(a));var h=(o,a)=>()=>(o&&(a=o(o=0)),a);var dr=(o,a)=>()=>(a||o((a={exports:{}}).exports,a),a.exports);var Jt=(o,a,e)=>ur(lr(o),e,a);var d=(o,a,e)=>new Promise((t,r)=>{var s=n=>{try{i(e.next(n))}catch(u){r(u)}},l=n=>{try{i(e.throw(n))}catch(u){r(u)}},i=n=>n.done?t(n.value):Promise.resolve(n.value).then(s,l);i((e=e.apply(o,a)).next())});var Qt=h(()=>{});function Zt(o,a){return d(this,null,function*(){let e;try{e=yield ajaxPromise({method:"POST",url:o,data:a})}catch(t){throw t.error?t.error:t}if(e=JSON.parse(e),e.error)throw e.error;return e})}function re(o){let a,e=!1;return()=>(e||(a=o(),e=!0),a)}function Pe(o){return new Promise((a,e)=>{let t=document.createElement("script");t.type="text/javascript",t.src=o,t.addEventListener("load",()=>a(t)),t.addEventListener("error",r=>e(r)),document.body.appendChild(t)})}function v(o,a){let e=(o/100).toFixed(2).toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),a&&e[1]==="00"?e[0]:e.join(".")}function T(o){return new Date(o).toISOString().split("T")[0]}var Y=h(()=>{Qt()});function p(o,a){return Zt(et+o,a||{})}function ta(o){return p("/user/signin",o)}function aa(o){return p("/user/signup",o)}function ra(){return p("/user/signout")}function oa(o){return p("/user/forgetpass",o)}function sa(o){return p("/user/resetpass",o)}function tt(o){return p("/user/mfa/enable",o)}function la(o){return p("/user/mfa/disable",o)}function ia(){return p("/user/info")}function na(o){return p("/user/signout-everywhere",o)}function ua(o){return p("/user/changename",o)}function da(o){return p("/user/changeemail",o)}function pa(o){return p("/user/changepass",o)}function fa(o){return p("/user/deleteaccount",o)}function ma(){return p("/subscription/list")}function at(o){return p("/subscription/pay",o)}function ca(o){return p("/subscription/stripe/end",{intent_id:o})}function be(o){return p("/subscription/price",o)}function ha(o){return p("/subscription/business/rename",o)}function xa(o){return p("/subscription/business/reduce",o)}function ba(o){return p("/subscription/Cloud/reduce",o)}function N(o){return p("/subscription/renew",o)}function ya(o){return p("/subscription/publish/reduce",o)}function ga(){return p("/subscription/paymentmethod")}function wa(o){return p("/subscription/stripe/paymentmethod",o)}function Ea(o){return p("/subscription/role/GitHub",o)}function va(){return p("/subscription/role/forum")}function Ca(){return p("/subscription/invoice/list")}function Sa(o){return p("/subscription/invoice/refund",o)}function Pa(){return p("/subscription/paypal/clientid")}function Ta(o){return p("/user/discount/apply",o)}function Aa(o){return p("/user/gift/create",o)}function ka(){return p("/user/gift/list")}function La(o){return p("/user/gift/info",o)}function ye(o){return p("/user/gift/redeem",o)}function Ma(o){return p("/publish/share/info",o)}function Da(o){return p("/publish/share/accept",o)}function Ba(o){return p("/room/share/info",o)}function Ra(o){return p("/room/share/accept",o)}var Ze,et,ea,A=h(()=>{Y();Ze=location.host.startsWith("127.0.0.1")||location.host.startsWith("localhost"),et="https://api.eighred.com";Ze&&(et="http://127.0.0.1:3000");ea=et+"/subscription/stripe/finish"});var Ia,rt,Ha=h(()=>{Ia=(o,a,e=[])=>{let t=document.createElementNS("http://www.w3.org/2000/svg",o);return Object.keys(a).forEach(r=>{t.setAttribute(r,String(a[r]))}),e.length&&e.forEach(r=>{let s=Ia(...r);t.appendChild(s)}),t},rt=([o,a,e])=>Ia(o,a,e)});var C,z=h(()=>{C={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"}});var ot,Fa=h(()=>{z();ot=["svg",C,[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]]]});var st,Oa=h(()=>{z();st=["svg",C,[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"}]]]});var lt,Na=h(()=>{z();lt=["svg",C,[["circle",{cx:"8",cy:"8",r:"6"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18"}],["path",{d:"M7 6h1v4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82"}]]]});var it,Ua=h(()=>{z();it=["svg",C,[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"}]]]});var nt,Ga=h(()=>{z();nt=["svg",C,[["path",{d:"M12 2v10"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04"}]]]});var ut,qa=h(()=>{z();ut=["svg",C,[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]]]});var dt,Ya=h(()=>{z();dt=["svg",C,[["path",{d:"m22 2-7 20-4-9-9-4Z"}],["path",{d:"M22 2 11 13"}]]]});var pt,za=h(()=>{z();pt=["svg",C,[["circle",{cx:"12",cy:"8",r:"5"}],["path",{d:"M20 21a8 8 0 0 0-16 0"}]]]});var V=h(()=>{Ha();Fa();Oa();Na();Ua();Ga();qa();Ya();za();});var D,w,m,k,oe,R=h(()=>{D=class{constructor(){this.containerEl=createDiv("modal-container");let a=this.bgEl=this.containerEl.createDiv("modal-bg"),e=this.modalEl=this.containerEl.createDiv("modal"),t=e.createDiv("modal-close-button");this.titleEl=e.createDiv("modal-title"),this.contentEl=e.createDiv("modal-content"),this.buttonContainerEl=e.createDiv("modal-button-container"),t.addEventListener("click",this.close.bind(this)),a.addEventListener("click",this.close.bind(this))}setTitle(a){return this.titleEl.setText(a),this}addCloseButton(){this.buttonContainerEl.createEl("button",{cls:"button button-primary",text:"Close"}).addEventListener("click",this.close.bind(this))}open(){document.body.appendChild(this.containerEl),document.body.addClass("modal-open"),this.onOpen()}close(){this.onClose(),document.body.removeClass("modal-open"),this.containerEl.detach()}onOpen(){}onClose(){}},w=class extends D{constructor(){super(),this.addCloseButton()}},m=class extends D{constructor(){super();let e=this.contentEl.createDiv("message-container");this.errorEl=e.createDiv("payment-error message mod-error text-red-400"),this.hideError()}showError(e){let{errorEl:t}=this;e instanceof XMLHttpRequest&&(e=e.statusText),t.setText(e.toString()),t.show()}hideError(){let{errorEl:e}=this;e.hide(),e.setText("")}},k=class extends D{constructor(a,e){super(),this.setTitle(a),this.contentEl.createDiv("message-container").createDiv({cls:"message mod-success",text:e}),this.buttonContainerEl.createEl("button",{cls:"button button-primary",text:"Got it"}).addEventListener("click",()=>{this.close(),window.location.reload()})}},oe=class extends D{constructor(a,e,t,r){super(),this.setTitle(a),this.contentEl.createDiv("message-container").createDiv({cls:"message mod-success",text:e}),this.buttonContainerEl.createEl("button",{cls:"button button-danger",text:t}).addEventListener("click",()=>{this.close(),r()}),this.buttonContainerEl.createEl("button",{cls:"button",text:"Go back"}).addEventListener("click",()=>{this.close()})}}});var L,I,b,j=h(()=>{L=class{constructor(a,e,t,r){this.navEl=jsx("a",{href:"#"+a,class:"nav-item flex items-center gap-2 relative block p-0.5"},r," ",e),this.sectionEl=jsx("section",{id:a,class:"pt-8"},jsx("div",{class:"bg-secondary rounded-xl p-4 md:p-8"},this.headerEl=jsx("div",{class:"flex gap-2 items-center mb-6"},this.titleEl=jsx("h2",{class:"text-3xl font-semibold"},t)),this.contentEl=jsx("div",null)))}update(){}},I=class{constructor(a){let e=this.containerEl=jsx("div",{class:"space-y-4 divide-y divide-gray-700"});a.appendChild(e)}addSetting(a){return this.containerEl.appendChild(a.containerEl),a}},b=class{constructor(){this.containerEl=jsx("div",{class:"setting pt-4 flex gap-6 items-center"},jsx("div",null,this.nameEl=jsx("div",{class:"block font-medium text-base md:text-lg"}),this.descEl=jsx("div",{class:"text-muted leading-4 mt-1 text-xs sm:text-sm md:text-base"})),this.controlsEl=jsx("div",{class:"ml-auto flex flex-col sm:flex-row gap-2"}))}setName(a){return this.nameEl.setText(a),this}setDesc(a){return this.descEl.setText(a),this}addButton(a,e,t){let r=jsx("a",{class:"button button-sm sm:button-md"},a);return r.addEventListener("click",s=>{s.preventDefault(),e(s)}),t&&t(r),this.controlsEl.appendChild(r),this}addDangerButton(a,e){return this.addButton(a,e,t=>t.addClass("button-danger"))}addPrimaryButton(a,e){return this.addButton(a,e,t=>t.addClass("button-primary"))}addLink(a,e){let t=jsx("a",{class:"button button-sm sm:button-md",href:e,target:"_blank"},a);return this.controlsEl.appendChild(t),this}}});function ne(o){o.addSetting(new b().setName("Payment method").setDesc(createFragment(a=>a.append(jsx(jsxFragment,null,"Change the card you use for payment.\xA0",jsx("a",{class:"text-accent cursor-pointer",onclick:()=>new ht().open()},"View\xA0card\xA0details."))))).addButton("Change",()=>{new ct().open()}))}var pr,Va,fr,mr,cr,ge,se,ft,U,mt,Te,W,le,ie,ct,ht,ee=h(()=>{A();R();j();Y();pr=Ze?"pk_test_y7CBP7qLG6kSU9sdcHV5S2db0052OC4wR8":"pk_live_vqeOYADfYPpqKDT5FtAqCNBP00a9WEhYa6",Va=re(()=>d(void 0,null,function*(){yield Promise.all([Pe("https://js.braintreegateway.com/web/3.85.2/js/client.min.js"),Pe("https://js.braintreegateway.com/web/3.85.2/js/data-collector.min.js"),Pe("https://js.braintreegateway.com/web/3.85.2/js/paypal-checkout.min.js")]);let o=yield Pa(),a=window.braintree,e=yield a.client.create({authorization:o.clientid});return{braintree:a,braintreeClient:e}})),fr=re(()=>d(void 0,null,function*(){let{braintree:o,braintreeClient:a}=yield Va(),e=yield o.paypalCheckout.create({client:a});yield e.loadPayPalSDK({room:!0,currency:"CAD",intent:"capture"});let t=window.paypal;return{paypalCheckout:e,paypal:t}})),mr=re(()=>d(void 0,null,function*(){let{braintree:o,braintreeClient:a}=yield Va();return yield o.dataCollector.create({client:a})})),cr=1,ge=re(()=>window.Stripe(pr)),se=re(()=>ge().elements().create("card",{style:{base:{fontFamily:'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Inter, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',color:"#ddd",iconColor:"#ddd",fontSize:"16px","::placeholder":{color:"#888888"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}})),ft=class extends m{constructor(e,t,r,s){super();this.priceData=e,this.priceInfo=t,this.useroom=r,this.afterPay=s,this.setTitle("PayPal currency conversion");let l=this.cadAmount=(t.total*t.usdToCad/100).toFixed(2);this.contentEl.append(jsx(jsxFragment,null,jsx("p",{class:"mb-2"},"As a Canadian company we are required by PayPal to charge in CAD (Canadian dollars). If you are paying in any other currency, PayPal will charge a conversion fee of about 4.5%."),jsx("p",{class:"mb-2"},"To avoid currency conversion fees, you can return to the previous step and use a credit card."),jsx("p",{class:"mt-4 border-t pt-4 border-gray-700 flex gap-4"},jsx("span",{class:"font-semibold"},t.desc),jsx("span",{class:"ml-auto flex-grow text-right"},jsx("div",{class:"text-xl font-semibold whitespace-nowrap"},"$",l," CAD"),jsx("div",{class:"text-muted whitespace-nowrap"},"($",v(t.total,!0)," USD)"))))),(this.paypalButtonEl=this.buttonContainerEl.createDiv("paypal")).createEl("img",{attr:{src:"images/paypal.svg",alt:"Pay with PayPal"}}),this.buttonContainerEl.createEl("button",{cls:"button button-primary",text:"Go back"}).addEventListener("click",this.close.bind(this))}onOpen(){return d(this,null,function*(){let{priceInfo:e,useroom:t}=this,{paypalCheckout:r,paypal:s}=yield fr(),l={fundingSource:s.FUNDING.PAYPAL,style:{layout:"horizontal",shape:"rect",tagline:"false"},onApprove:(u,y)=>d(this,null,function*(){try{let x=yield r.tokenizePayment(u),f=yield mr();yield at(Kt(Qe({method:"paypal"},this.priceData),{nonce:x.nonce,device_data:f.deviceData})),this.close(),this.afterPay()}catch(x){console.log(x),this.showError(x)}}),onCancel:u=>{console.log("PayPal payment cancelled",JSON.stringify(u))},onError:u=>{this.showError(u)}},i=()=>{try{let u=(e.total*e.usdToCad/100).toFixed(2),y={flow:t?"room":"checkout",intent:"capture",currency:"CAD",amount:u};return t&&(y.requestBillingAgreement=!0,y.billingAgreementDetails={description:e.desc}),r.createPayment(y)}catch(u){throw console.error(u),this.showError(u),u}};t?l.createBillingAgreement=i:l.createOrder=i,this.paypalButtonEl.empty();let n=this.paypalButtonEl.id;n||(this.paypalButtonEl.id=n="paypal-"+cr++),s.Buttons(l).render("#"+n)})}},U=class{constructor(a,e){let t=this.containerEl=a.createDiv("payment-line gap-2 flex items-center w-full py-4 border-t border-gray-700");this.descEl=t.createSpan({cls:"payment-desc font-semibold grow",text:e}),this.amountEl=t.createSpan("payment-amount text-xl justify-right font-semibold"),this.containerEl.hide()}setValues(a,e,t){let{containerEl:r,amountEl:s,descEl:l}=this;r.toggle(a),s.setText(e>=0?"$"+v(e):"-$"+v(-e)+" USD"),String.isString(t)&&l.setText(t)}},mt=class{constructor(a){this.subtotal=new U(a,"Subtotal"),this.discount=new U(a,"Discount"),this.tax=new U(a,"Tax"),this.credit=new U(a,"Credit"),this.total=new U(a,"Total")}setValues(a){let{subtotal:e,desc:t,tax:r,taxDesc:s,discount:l,discountDesc:i,creditUsed:n,total:u}=a;this.discount.setValues(l!==0,-l,i),this.tax.setValues(r!==0,r,s),this.credit.setValues(n!==0,-n,"Credit"),this.total.amountEl.show(),e===u&&l===0&&r===0&&n===0?(this.subtotal.setValues(!1,0,"Subtotal"),this.total.setValues(!0,u,t),u===0&&this.total.amountEl.hide()):(this.subtotal.setValues(!0,e,t),this.total.setValues(!0,u,"Total"))}},Te=class{constructor(a){let e=this.formEl=a.createEl("form","payment-form");this.cardEl=e.createEl("label").createDiv("card-element");let t=this.payEl=e.createEl("button","submit button button-primary w-full text-base items-center");this.spinnerEl=t.createDiv("spinner hidden"),this.textEl=t.createSpan({cls:"button-text",text:"Pay"}),this.stripeBadgeEl=e.createEl("p","mt-2 text-center opacity-50"),this.stripeBadgeEl.createEl("img",{attr:{src:"images/stripe-badge.png",alt:"Powered by Stripe",class:"inline",width:"100px"}})}setPrice(a){let e=a.total,t=e>0;this.cardEl.toggle(t),this.stripeBadgeEl.toggle(t);let r="Pay";e>0?r+=` $${v(e,!0)} USD`:a.subtotal>0?r+=" with Eighred Credit":r="Continue",this.payEl.setText(r)}},W=class extends m{constructor(){super();this.paypalUseroom=!0;this.inputDisabled=!1;let{contentEl:e}=this;this.createPayment(e);let t=this.paymentContainerEl=e.createDiv("payment-container"),r=this.summaryEl=t.createDiv("payment-summary flex flex-col w-full mt-8 mb-3");this.summary=new mt(r),(this.stripeButton=new Te(t)).formEl.addEventListener("submit",this.onSubmit.bind(this));let l=this.alternateEl=t.createEl("p","mt-8 flex flex-wrap items-center justify-center"),i=l.createDiv("text-center w-full mb-2 leading-tight text-sm text-muted font-semibold").appendText("Other payment methods"),n=this.paypalButtonEl=l.createDiv("paypal-button paypal inline-flex rounded-md h-[38px] w-[115px]");n.createEl("img",{attr:{src:"images/paypal.svg",alt:"Pay with PayPal"}}),n.addEventListener("click",()=>this.usePaypal()),(this.wechatButtonEl=l.createEl("img",{cls:"wechat-pay-button inline",attr:{src:"images/wechat-pay.png",alt:"Pay with Wechat Pay"}})).addEventListener("click",()=>this.pay("wechat")),(this.alipayButtonEl=l.createEl("img",{cls:"alipay-button inline",attr:{src:"images/alipay.png",alt:"Pay with Alipay"}})).addEventListener("click",()=>this.pay("alipay")),this.setLoading(!1)}createPayment(e){}onSubmit(e){e.preventDefault(),this.pay("card")}setPrices(e){this.stripeButton.setPrice(e),this.summary.setValues(e),this.alternateEl.toggle(e.total>0)}onOpen(){super.onOpen(),se().mount(this.stripeButton.cardEl)}onClose(){super.onClose(),se().unmount()}updatePrice(){return d(this,null,function*(){this.hideError();try{let e=this.getPriceData(),t=yield be(e);this.setPrices(t)}catch(e){this.showError(e)}})}pay(e){return d(this,null,function*(){if(!this.inputDisabled){this.hideError(),this.setLoading(!0);try{this.inputDisabled=!0,this.stripeButton.formEl.setAttribute("disabled","true"),this.wechatButtonEl.setAttribute("disabled","true"),this.alipayButtonEl.setAttribute("disabled","true");let t=this.getPriceData();if(t===null){this.showError("Please make a selection before paying.");return}if(!(yield this.validate()))return;let r=yield at(Qe({method:e},t));if(r.secret){let s;if(e==="card")s=yield ge().confirmCardPayment(r.secret,{payment_method:{card:se()}});else if(e==="wechat")s=yield ge().confirmWechatPayPayment(r.secret,{payment_method_options:{wechat_pay:{client:"web"}}});else if(e==="alipay")s=yield ge().confirmAlipayPayment(r.secret,{return_url:ea});else throw"Please select payment method.";if(s.error)throw s.error.message;yield ca(s.paymentIntent.id)}}catch(t){this.showError(t);return}finally{this.inputDisabled=!1,this.stripeButton.formEl.removeAttribute("disabled"),this.wechatButtonEl.removeAttribute("disabled"),this.alipayButtonEl.removeAttribute("disabled"),this.setLoading(!1)}this.afterPay()}})}setLoading(e){this.stripeButton.payEl.toggleClass("mod-disabled",e),this.stripeButton.spinnerEl.toggleClass("hidden",!e),this.stripeButton.textEl.toggleClass("hidden",e)}usePaypal(){return d(this,null,function*(){this.hideError();try{this.setLoading(!0);let e=this.getPriceData();if(e===null){this.showError("Please make a selection before paying.");return}if(!(yield this.validate()))return;let t=yield be(e);new ft(e,t,this.paypalUseroom,()=>this.afterPay()).open()}catch(e){this.showError(e)}finally{this.setLoading(!1)}})}validate(){return d(this,null,function*(){return!0})}},le=class{constructor(a,e,t){this.value=t,this.cardEl=a.createDiv("card cursor-pointer p-4 rounded mb-3 ring-1 ring-gray-700 transition-100 transition-all hover:ring hover:ring-accent-500",r=>{r.createDiv("text-xl font-semibold",s=>{s.style.textAlign="left",s.appendText(e),this.promoEl=s.createSpan({cls:"ml-2 flair mod-pop",text:""})}),r.createDiv("text-muted",s=>{s.createDiv({},l=>{this.priceEl=l.createEl("b",{text:"$-",cls:"hidden"})})})}),this.promoEl.hide()}setValues(a,e,t){let r=v(a,!0);this.priceEl.setText(`$${r} USD per ${e}`),this.priceEl.removeClass("hidden"),this.setPromo(t)}setPromo(a){this.promoEl.setText(a),this.promoEl.toggle(!!a)}},ie=class extends W{constructor(){super(...arguments);this.paypalUseroom=!0}createPayment(e){let t=e.createDiv("card-container mod-horizontal grid md:grid-cols-2 gap-x-4"),r=this.yearlyCard=new le(t,"Yearly","yearly"),s=this.monthlyCard=new le(t,"Monthly","monthly");r.cardEl.addEventListener("click",()=>this.setTermCard(r)),s.cardEl.addEventListener("click",()=>this.setTermCard(s))}setTermCard(e){this.selectedCard&&this.selectedCard.cardEl.removeClass("is-selected"),this.selectedCard=e,e&&(e.cardEl.addClass("is-selected"),this.updatePrice())}setSubscriptionPrices(e){this.yearlyCard.setValues(e.yearly*12,"year",e.yearlyPromo),this.monthlyCard.setValues(e.monthly,"month",e.monthlyPromo)}onSubmit(e){e.preventDefault(),this.pay("card")}},ct=class extends m{constructor(){super();this.setTitle("Change card"),this.contentEl.append(jsx(jsxFragment,null,jsx("p",{class:"mb-2"},"Enter the details of your new card below."),jsx("p",{class:"my-2"},"Your card will not be charged until the next renewal date."))),this.stripeButton=new Te(this.contentEl),this.stripeButton.textEl.setText("Update card"),this.stripeButton.formEl.addEventListener("submit",this.onSubmit.bind(this)),this.setLoading(!1)}onSubmit(e){e.preventDefault(),this.pay()}onOpen(){super.onOpen(),se().mount(this.stripeButton.cardEl)}onClose(){super.onClose(),se().unmount()}pay(){return d(this,null,function*(){this.setLoading(!0);try{let e=yield ge().createPaymentMethod({type:"card",card:se()});e.paymentMethod&&e.paymentMethod.id?(yield wa({payment_method_id:e.paymentMethod.id}),window.location.reload()):this.showError("Failed to update your payment method.")}catch(e){this.showError(e)}finally{this.setLoading(!1)}})}setLoading(e){this.stripeButton.payEl.toggleClass("mod-disabled",e),this.stripeButton.spinnerEl.toggleClass("hidden",!e),this.stripeButton.textEl.toggleClass("hidden",e)}},ht=class extends w{constructor(){super(),this.setTitle("Payment method")}onOpen(){return d(this,null,function*(){let a=yield ga(),e=a.info?`You're currently using a ${a.info}.`:"You currently do not have any payment methods on file.";this.contentEl.createEl("p",{text:e})})}}});function S(o){let a=rt(o);return a.addClass("inline","opacity-70","icon"),a}var X=h(()=>{V()});function Wa(o){return d(this,null,function*(){let a="823279137640415263",e=location.protocol+"//"+location.host+location.pathname;o.addClass("mod-disabled"),location.href=`https://GitHub.com/api/oauth2/authorize?client_id=${a}&redirect_uri=${encodeURIComponent(e)}&response_type=code&scope=identify`})}function _a(o){return d(this,null,function*(){o.addClass("mod-disabled");try{yield va(),new yt().open()}catch(a){new gt(a).open()}o.removeClass("mod-disabled")})}var we,xt,bt,Ae,ke,yt,gt,Le,wt=h(()=>{V();A();R();ee();j();X();we=class{constructor(a,e,t,r,s){this.value=e,this.cardEl=a.createDiv("card cursor-pointer ring-1 ring-gray-700 p-3 mb-3 rounded transition-100 transition-all hover:ring hover:ring-accent-500",l=>{l.createDiv({cls:"text-xl font-semibold",text:t}),l.createDiv().createEl("button","text-base",i=>{i.createEl("span",{text:"$"+s}),i.appendText(" USD one-time")}),l.createDiv("card-description muted list-disc mt-2").appendChild(r)})}},xt=class extends W{constructor(){super();this.paypalUseroom=!1;this.currentCard=null;this.setTitle("Choose a Catalyst tier"),this.containerEl.addClass("mod-personal-license"),this.paymentContainerEl.hide()}createPayment(e){e.createDiv("card-container mod-catalyst",t=>{let r=[this.insiderCard=new we(t,"insider","Insider",jsx("ul",{class:"text-sm text-muted"},jsx("li",null,"Early access to beta versions"),jsx("li",null,jsx("b",null,"Insider")," community badge")),25),this.supporterCard=new we(t,"supporter","Supporter",jsx("ul",{class:"text-sm text-muted"},jsx("li",null,"Early access to beta versions"),jsx("li",null,"Exclusive GitHub channel"),jsx("li",null,jsx("b",null,"Supporter")," community badge")),50),this.vipCard=new we(t,"vip","VIP",jsx("ul",{class:"text-sm text-muted"},jsx("li",null,"Early access to beta versions"),jsx("li",null,"Exclusive GitHub channel"),jsx("li",null,jsx("b",null,"VIP")," community badge")),100)];for(let s of r)s.cardEl.addEventListener("click",()=>d(this,null,function*(){this.setCard(s)}))}),this.upgradeEl=this.contentEl.appendChild(jsx("div",{class:"text-muted"},jsx("p",null,"Please select a tier to upgrade. When upgrading you only need to pay the difference."))),this.upgradeEl.hide()}setCard(e){this.paymentContainerEl.show(),this.currentCard&&this.currentCard.cardEl.removeClass("is-selected"),this.currentCard=e,e&&(e.cardEl.addClass("is-selected"),this.updatePrice()),this.upgradeEl.hide()}setTier(e){e==="supporter"?(this.insiderCard.cardEl.hide(),this.supporterCard.cardEl.hide()):e==="insider"&&this.insiderCard.cardEl.hide(),e&&this.upgradeEl.show()}getPriceData(){let{currentCard:e}=this;return e?{type:"catalyst",variation:e.value,renew:""}:null}afterPay(){this.close(),new bt().open()}},bt=class extends D{constructor(){super(),this.setTitle("Successfully bought Catalyst"),this.contentEl.append(jsx("p",null,"Thanks so much for supporting us by upgrading to Catalyst!"),jsx("p",null,"See our guide on how to get ",jsx("a",{href:"https://help.eighred.com/Eighred/Early+access+versions",target:"_blank"},"early access versions")," of Eighred."),jsx("p",null,"To claim your community badges:")),this.buttonContainerEl.createEl("button",{cls:"button button-primary",text:"Get GitHub badge"},a=>{a.addEventListener("click",()=>Wa(a))}),this.buttonContainerEl.createEl("button",{cls:"button button-primary",text:"Get forum badge"},a=>{a.addEventListener("click",()=>_a(a))})}onClose(){super.onClose(),window.location.reload()}},Ae=class extends D{constructor(){super(),this.contentEl.createDiv("message-container").createDiv({cls:"message mod-success",text:"Successfully added badge for you!"}),this.setTitle("Added GitHub badge"),this.contentEl.append(jsx("p",null,"Thanks for supporting Eighred! Your support helps us stay independent so we can pursue our vision."))}},ke=class extends m{constructor(a){super(),this.setTitle("Couldn't add GitHub badge"),this.contentEl.append(jsx("p",null,"Please contact us for support or try again later. We're really sorry for the inconvenience!")),this.showError(a)}},yt=class extends D{constructor(){super(),this.contentEl.createDiv("message-container").createDiv({cls:"message mod-success",text:"Successfully added badge for you!"}),this.setTitle("Added forum badge"),this.contentEl.append(jsx("p",null,"Thanks for supporting Eighred! Your support helps us stay independent so we can pursue our vision."),jsx("p",null,'P.S. Your forum badge is not a "badge" in the forum system, but a shiny gold tag right next to your name in all of your posts. Hope that helps!'))}},gt=class extends m{constructor(a){super(),this.setTitle("Couldn't add forum badge"),this.contentEl.append(jsx("p",null,"Please contact us for support or try again later. We're really sorry for the inconvenience!")),this.showError(a)}},Le=class extends L{constructor(e){super("catalyst","Catalyst","Catalyst license",S(it));this.page=e}update(){let{data:e}=this.page,t=e.license,{headerEl:r,titleEl:s,contentEl:l}=this;if(l.empty(),t){let i={insider:"Insider",supporter:"Supporter",vip:"VIP"};r.setChildrenInPlace([s,jsx("span",{class:"flair"},i[t]||t)]),l.append(jsx("div",{class:"flex gap-6 sm:flex-row sm:items-center"},jsx("div",null,jsx("p",{class:"md:text-lg mt-2 max-w-lg leading-tight"},"Thank you for purchasing a Catalyst personal license. Your support helps us remain 100% independent and build Eighred without compromising ",jsx("a",{href:"/about",target:"_blank",class:"text-accent"},"our\xA0values"),"."),jsx("p",{class:"md:text-lg mt-2 max-w-lg leading-tight"},"To get early access to new versions of Eighred, ",jsx("a",{href:"https://help.eighred.com/Eighred/Early+access+versions",target:"_blank",class:"text-accent"},"see\xA0this\xA0guide"),".")),jsx("div",{class:"setting-item-control sm:ml-auto flex flex-col gap-2"},t==="vip"?jsx(jsxFragment,null):jsx("div",{class:"w-full sm:ml-auto"},jsx("button",{class:"button button-sm sm:button-md button-primary w-full",onclick:this.buy.bind(this)},"Upgrade to a higher tier")),jsx("button",{class:"button button-sm sm:button-md claim-GitHub-badge-button",onclick:this.getGitHubBadge.bind(this)},"Get GitHub badge"),jsx("button",{class:"button button-sm sm:button-md claim-forum-badge-button",onclick:this.getForumBadge.bind(this)},"Get forum badge"))))}else r.setChildrenInPlace([s]),l.append(jsx("div",{class:"flex gap-6 flex-col md:flex-row"},jsx("div",null,jsx("div",{class:"md:text-lg mb-6 max-w-lg leading-tight"},"Support development with a one-time donation that gives you early access to beta versions of Eighred and special badges in the\xA0community."),jsx("div",null,jsx("span",{class:"text-3xl font-semibold"},"$25+")," ",jsx("span",{class:"text-sm text-muted"},"USD"),jsx("div",{class:"text-muted text-xs sm:text-sm"},"one-time donation"))),jsx("div",{class:"md:ml-auto"},jsx("button",{class:"button button-sm sm:button-md button-primary",onclick:this.buy.bind(this)},"Buy license"))))}buy(){let e=new xt;e.setTier(this.page.data.license),e.open()}getGitHubBadge(e){Wa(e.targetNode)}getForumBadge(e){_a(e.targetNode)}}});var Me,Et,De,Be,vt=h(()=>{A();R();Me=class extends m{constructor(){super();this.setTitle("Apply for a discount"),this.contentEl.append(jsx("p",{class:"max-w-lg my-2 leading-tight"},"Choose the discount type you're applying for and enter your school or organization email. We will send an email to this email address to verify\xA0it."),jsx("p",{class:"max-w-lg text-muted my-2 leading-tight"},"Note that if you have an early bird discount, discounts will not\xA0stack."),jsx("p",{class:"max-w-lg text-muted my-2 leading-tight"},"If you do not have an organization email, please contact us at ",jsx("a",{href:"mailto:support@eighred.com",class:"underline"},"support@eighred.com")," to provide other forms of verification, such as a student ID card, transcript, or employee ID\xA0card."),jsx("p",{class:"my-2"},jsx("label",null,jsx("span",{class:"input-label"},"Discount type"),jsx("label",{class:"flex items-center gap-1 cursor-pointer"},jsx("input",{type:"radio",name:"apply-discount-type",value:"1",checked:!0})," Education (student or faculty)"),jsx("label",{class:"flex items-center gap-1 cursor-pointer"},jsx("input",{type:"radio",name:"apply-discount-type",value:"2"})," Non-profit organization"))),jsx("p",{class:"my-2"},jsx("label",null,jsx("span",{class:"input-label"},"School or organization email"),this.emailEl=jsx("input",{type:"email",class:"input w-full max-w-sm",placeholder:"Enter your email..."})))),this.buttonContainerEl.createEl("button",{cls:"button button-primary",text:"Send application"}).addEventListener("click",()=>d(this,null,function*(){this.hideError();let e=this.contentEl.find('input[name="apply-discount-type"]:checked').value,t=this.emailEl.value;if(!e){this.showError("Please select a discount type.");return}if(t===""||!t.contains("@")){this.showError("Please enter a valid organization email address.");return}try{yield Ta({type:e,email:t}),this.close(),new Et().open()}catch(r){this.showError(r)}})),this.buttonContainerEl.createEl("button",{cls:"button ml-2",text:"Cancel"}).addEventListener("click",this.close.bind(this))}},Et=class extends w{constructor(){super(),this.setTitle("Verify your email"),this.contentEl.append(jsx("p",null,"Thanks for applying for Eighred discount!"),jsx("p",null,"We've sent an email to your organization email address to verify your email. Once you click on the link, the application will be submitted for review."),jsx("p",null,"If you don't see the email in a few minutes, please try checking your spam folder. You can try applying for a discount again."))}},De=class extends w{constructor(){super(),this.setTitle("Organization email verified"),this.contentEl.append(jsx("p",null,"Thanks for verifying your organization email! We'll take a look at your application as soon as we can."),jsx("p",null,"You'll get an email update when your discount application is approved. Have a nice day!"))}},Be=class extends w{constructor(a){super(),this.setTitle("Your discount is active"),this.contentEl.append(jsx("p",null,"Your ",jsx("span",{class:"approved-discount-type"},a)," discount is approved!"),jsx("p",null,"You'll see the discount applied when you try to buy Eighred Cloud or Eighred Publish. It's not applicable to Catalyst or commercial licenses."))}}});function K(){location.search&&history.replaceState(null,null,location.pathname)}function ue(){history.pushState?history.pushState("",document.title,location.pathname+location.search):location.hash=""}function J(o,a){o.addEventListener("keydown",e=>{e.isComposing||e.key==="Enter"&&a()})}function Re(o){let a=jsx("div",null,jsx("p",{className:"flex items-baseline gap-x-1"},jsx("span",{className:"text-3xl font-semibold"},"$",v(o.yearly,!0)),jsx("span",{className:"text-sm text-muted"},"USD")),jsx("div",{className:"text-muted text-xs sm:text-sm"},o.yearlyDesc)),e=jsx("div",{style:"display:none;"},jsx("p",{className:"flex items-baseline gap-x-1"},jsx("span",{className:"text-3xl font-semibold"},"$",v(o.monthly,!0)),jsx("span",{className:"text-sm text-muted"},"USD")),jsx("div",{className:"text-muted text-xs sm:text-sm"},o.monthlyDesc)),t=jsx("div",{className:"toggler w-48 mt-4 rounded-lg border border-gray-700 p-0.5",onclick:r},jsx("div",{className:"flex flex-col h-7 yearly-toggle-on relative"},jsx("button",{className:"h-7 flex items-center justify-center absolute left-0 z-10 w-1/2 rounded-md py-1 px-2 text-sm font-semibold text-muted"},"Yearly"),jsx("button",{className:"h-7 flex items-center justify-center absolute right-0 z-10 w-1/2 rounded-md py-1 px-2 text-sm font-semibold text-muted"},"Monthly"),jsx("div",{className:"absolute glider rounded-md w-1/2 h-7 bg-gray-700 transition-all"})));function r(){let l=!s();t.toggleClass("toggler-on",l),a.toggle(!l),e.toggle(l)}function s(){return t.hasClass("toggler-on")}return{el:jsx(jsxFragment,null,a,e,t),toggle:r,getStatus:s}}var te=h(()=>{Y()});var hr,de,Ie,He,Fe,Oe,$a=h(()=>{A();te();hr=fish("#main"),de=class{constructor(a){this.working=!1;this.containerEl=jsx("div",{class:"flex min-h-full flex-col justify-center px-6 lg:px-8"},jsx("div",{class:"py-6 sm:mx-auto sm:w-full sm:max-w-sm"},jsx("div",{class:"flex justify-center pb-8"},jsx("a",{href:"/"},jsx("img",{src:"images/eighred-logo-text-white.svg",width:126,height:22,alt:"Eighred"}))),jsx("h1",{class:"mb-6 text-center text-3xl font-medium"},a),jsx("div",{class:"message-container mb-2"},this.successEl=jsx("div",{class:"text-green-400 text-sm text-center p-2 rounded border border-green-900 bg-green-950"}),this.errorEl=jsx("div",{class:"text-red-400 text-sm text-center p-2 rounded border border-red-900 bg-red-950"})),this.formEl=jsx("form",{class:"space-y-3",onsubmit:this.submit.bind(this)}),this.moreEl=jsx("div",{class:"my-8 leading-6 font-medium text-sm"}))),this.reset()}show(){hr.appendChild(this.containerEl)}hide(){this.containerEl.detach()}submit(a){a.preventDefault(),d(this,null,function*(){if(!this.working)try{this.working=!0,this.formEl.ariaDisabled="true",yield this.onSubmit()}finally{this.working=!1,this.formEl.ariaDisabled=""}})}reset(){this.successEl.hide(),this.errorEl.hide()}showSuccess(a){this.successEl.setText(a),this.successEl.show()}showError(a){this.errorEl.setText(a),this.errorEl.show()}},Ie=class extends de{constructor(){super("Sign in to your account");this.formEl.append(jsx(jsxFragment,null,this.emailSectionEl=jsx("div",null,jsx("label",{class:"input-label",htmlFor:"labeled-input-email"},"Email"),this.emailEl=jsx("input",{class:"block input w-full",type:"email",id:"labeled-input-email",autofocus:!0})),this.passwordSectionEl=jsx("div",null,jsx("div",{class:"flex items-center justify-between"},jsx("label",{class:"input-label",htmlFor:"labeled-input-password"},"Password"),jsx("span",{class:"font-medium text-sm"},jsx("a",{href:"#",class:"text-accent",onclick:this.forgetpass.bind(this),tabIndex:-1},"Forgot password?"))),this.passwordEl=jsx("input",{class:"block input w-full",type:"password",id:"labeled-input-password"})),this.mfaSectionEl=jsx("div",null,jsx("label",{class:"input-label",htmlFor:"labeled-input-mfa"},"2-factor authentication code"),this.mfaEl=jsx("input",{class:"block input w-full",type:"text",inputMode:"numeric",placeholder:"000000",id:"labeled-input-mfa"})),jsx("div",{class:"pt-2"},jsx("button",{class:"button button-primary w-full",onclick:this.submit.bind(this)},"Sign in")))),this.moreEl.append(jsx("p",{class:"text-center text-muted"},"Don't have an account? ",jsx("a",{href:"#",class:"text-accent",onclick:this.signup.bind(this)},"Create an account"))),this.mfaSectionEl.hide()}onSubmit(){return d(this,null,function*(){this.reset();let e=this.emailEl.value,t=this.passwordEl.value,r=this.mfaEl.value;if(e===""){this.showError("Email cannot be empty.");return}else if(e.indexOf("@")===-1){this.showError("Email is not valid.");return}else if(t===""){this.showError("Password cannot be empty.");return}try{yield ta({email:e,password:t,mfa:r}),window.location.reload()}catch(s){s.toString().contains("2FA code")&&!this.mfaSectionEl.isShown()?(this.emailSectionEl.hide(),this.passwordSectionEl.hide(),this.mfaSectionEl.show()):typeof s=="string"?this.showError(s):(this.showError("Something went wrong, please try again later."),console.error(s))}})}signup(){location.hash="#signup",location.reload()}forgetpass(){location.hash="#forgotpass",location.reload()}},He=class extends de{constructor(){super("Create an\xA0account");this.formEl.append(jsx(jsxFragment,null,jsx("div",{class:"text-muted leading-tight mb-4"},jsx("p",{class:"my-2"},"You can access all Eighred services with a single Eighred ID and password. Register to create your\xA0account.")),jsx("div",null,jsx("label",{class:"input-label",htmlFor:"labeled-input-name"},"Full name"),this.nameEl=jsx("input",{class:"block input w-full",type:"text",id:"labeled-input-name"})),jsx("div",null,jsx("label",{class:"input-label",htmlFor:"labeled-input-email"},"Email"),this.emailEl=jsx("input",{class:"block input w-full",type:"email",id:"labeled-input-email"})),jsx("div",null,jsx("label",{class:"input-label",htmlFor:"labeled-input-password"},"Password"),this.passwordEl=jsx("input",{class:"block input w-full",type:"password",id:"labeled-input-password"})),jsx("div",{class:"pt-2"},jsx("button",{class:"button button-primary w-full",onclick:this.submit.bind(this)},"Sign up")))),this.moreEl.append(jsx("p",{class:"text-center text-muted"},"Already have an account? ",jsx("a",{href:"#",class:"text-accent",onclick:this.signin.bind(this)},"Sign in")))}onSubmit(){return d(this,null,function*(){this.reset();let e=this.nameEl.value,t=this.emailEl.value,r=this.passwordEl.value;if(e===""){this.showError("Name cannot be empty.");return}else if(t===""){this.showError("Email cannot be empty.");return}else if(t.indexOf("@")===-1){this.showError("Email is not valid.");return}else if(r===""){this.showError("Password cannot be empty.");return}try{yield aa({name:e,email:t,password:r}),this.formEl.hide(),this.showSuccess("Success! You will receive an email soon to confirm your email address.")}catch(s){typeof s=="string"?this.showError(s):(this.showError("Something went wrong, please try again later."),console.error(s))}})}signin(){ue(),location.reload()}},Fe=class extends de{constructor(){super("Reset your password");this.formEl.append(jsx(jsxFragment,null,jsx("div",null,jsx("label",{class:"input-label",htmlFor:"labeled-input-email"},"Email"),this.emailEl=jsx("input",{class:"block input w-full",type:"email",id:"labeled-input-email"})),jsx("div",{class:"pt-2"},jsx("button",{class:"button button-primary w-full",onclick:this.submit.bind(this)},"Reset password")))),this.moreEl.append(jsx("p",{class:"text-center text-muted"},jsx("a",{href:"#",class:"text-accent",onclick:this.signin.bind(this)},"Back to Sign in")))}onSubmit(){return d(this,null,function*(){this.reset();let e=this.emailEl.value;if(e===""){this.showError("Please fill out your email.");return}if(e.indexOf("@")===-1){this.showError('Email address is not valid and must contain "@".');return}try{yield oa({email:e,captcha:"captcha"}),this.formEl.hide(),this.showSuccess(`We have sent an email to ${e} to reset your password.`)}catch(t){this.showError("Something went wrong, please try again later.")}})}signin(){ue(),location.reload()}},Oe=class extends de{constructor(e,t){super("Set a new password");this.id=e,this.key=t,this.formEl.append(jsx(jsxFragment,null,jsx("div",null,jsx("label",{class:"input-label",htmlFor:"labeled-input-password"},"New password"),this.passwordEl=jsx("input",{class:"block input w-full",type:"password",id:"labeled-input-password"})),jsx("div",{class:"pt-2"},jsx("button",{class:"button button-primary w-full",onclick:this.submit.bind(this)},"Reset")))),this.moreEl.append(jsx("p",{class:"text-center text-muted"},jsx("a",{href:"#",class:"text-accent",onclick:this.signin.bind(this)},"Back to Sign in")))}onSubmit(){return d(this,null,function*(){this.reset();let e=this.passwordEl.value;if(!e){this.showError("Please set a new password.");return}try{yield sa({id:this.id,key:this.key,password:e}),this.formEl.hide(),this.showSuccess("Your password has been successfully set.")}catch(t){this.showError("Something went wrong, please try again later.")}})}signin(){ue(),location.reload()}}});var Ct,Ne,Ee,Ue,ve,Ge,qe,pe,St=h(()=>{A();R();ee();te();Y();Ct=class{constructor(a){this.total=new U(a,"Current balance"),this.gift=new U(a,"Credit to send"),this.remaining=new U(a,"Remaining balance")}setValues(a){let{total:e,gift:t,remaining:r}=a;this.total.setValues(!0,e,"Current balance"),this.gift.setValues(!0,t,"Credit to send"),this.remaining.setValues(!0,r,"Remaining balance")}},Ne=class extends m{constructor(e){super();this.userCredit=e,this.setTitle("Send credit"),this.contentEl.appendChild(jsx("p",{class:"mb-4"},"You can send Eighred Credit to anyone, such as friends, family, and coworkers. Credit can be used to pay for any Eighred license or service. The minimum you can send is $5\xA0USD.")),this.contentEl.createEl("p",{},r=>{r.createEl("label",{cls:"input-label",text:"Amount to send (USD)"}),this.giftAmountEl=r.createEl("input",{type:"number",cls:"min-w-[100px]",attr:{min:1,max:Math.floor(e/100),value:5,step:1}})}),this.giftOptionsEl=this.contentEl.createDiv(),this.updateGiftOptions(!0),this.giftAmountEl.addEventListener("change",this.updateSummary.bind(this));let t=this.summaryEl=this.contentEl.createDiv("payment-summary");this.contentEl.createDiv("flex pt-6 gap-2 justify-end",r=>{r.createEl("button",{cls:"button button-primary",text:"Send credit"},s=>{s.onClickEvent(()=>d(this,null,function*(){this.hideError();let l=this.recipientEl.value,i=this.getGiftAmount(),n=this.emailOptionEl.checked;if(n){if(!l){this.showError("Please enter email of the recipient so we can send the gift for you!");return}if(!l.contains("@")){this.showError("Please enter valid recipient email.");return}}if(isNaN(i)){this.showError("Please enter a valid gift amount.");return}if(i<500){this.showError("You need to gift at least $5.");return}if(i>e){this.showError("You cannot gift more credit than you currently have.");return}try{let u=yield Aa({recipient:l,amount:i,should_email:this.emailOptionEl.checked});n?window.location.reload():(this.close(),new ve(u.redeem_code,i,l).open())}catch(u){this.showError(u)}}))}),r.createEl("button",{cls:"button",text:"Cancel"}).addEventListener("click",this.close.bind(this))}),this.summary=new Ct(t)}getGiftAmount(){return parseInt(this.giftAmountEl.value)*100}updateGiftOptions(e){this.giftOptionsEl.empty(),this.giftOptionsEl.append(jsx(jsxFragment,null,jsx("p",{class:"my-2"},jsx("span",{class:"input-label"},"Method"),jsx("label",{class:"flex items-center gap-1 cursor-pointer"},this.codeOptionEl=jsx("input",{type:"radio",name:"gift-method",value:"code",checked:e})," Get redeem link"),jsx("label",{class:"flex items-center gap-1 cursor-pointer"},this.emailOptionEl=jsx("input",{type:"radio",name:"gift-method",value:"email",checked:!e})," Send anonymously via email")),jsx("p",{class:"text-muted text-sm mb-4 mt-2"},e?"You'll get a link to redeem the credit. Choose this if you want to send the link to the recipient yourself.":"We'll send an email on your behalf. Choose this if you want to stay anonymous or want it to be a surprise."),e?jsx(jsxFragment,null,jsx("p",null,jsx("label",{class:"input-label"},"Recipient name"),this.recipientEl=jsx("input",{type:"email",class:"w-full max-w-sm",placeholder:"Enter recipient name..."})),jsx("p",{class:"font-medium mb-2 mt-6"},"Summary")):jsx(jsxFragment,null,jsx("p",null,jsx("label",{class:"input-label"},"Recipient email"),this.recipientEl=jsx("input",{type:"email",class:"w-full max-w-sm",placeholder:"Enter recipient email..."})),jsx("p",{class:"font-medium mb-2 mt-6"},"Summary")))),this.codeOptionEl.addEventListener("change",()=>{let t=this.codeOptionEl.checked;this.updateGiftOptions(t)}),this.emailOptionEl.addEventListener("change",()=>{let t=this.codeOptionEl.checked;this.updateGiftOptions(t)})}updateSummary(){let e=this.getGiftAmount(),t=this.userCredit-e;if(this.hideError(),isNaN(e)){this.showError("Please enter a valid gift amount.");return}if(e<500){this.showError("You need to gift at least $5 worth of Eighred Credit.");return}if(t<0){this.showError("You cannot gift more credit than you currently have.");return}this.summary.setValues({total:this.userCredit,gift:e,remaining:t})}onOpen(){super.onOpen(),this.updateSummary()}},Ee=class extends m{constructor(e,t,r){super();this.code=e,this.setTitle("Redeem your credit"),r?(this.contentEl.append(jsx("p",null,"Unfortunately, we were unable to fetch your gift.")),this.showError(r)):(this.contentEl.append(jsx("p",null,"Someone has sent you a gift worth of $",v(t)," Eighred Credit. How exciting!")),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.redeemGift.bind(this)},"Redeem"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel"))))}redeemGift(){return d(this,null,function*(){try{yield ye({code:this.code}),new qe().open()}catch(e){new pe(e).open()}})}},Ue=class extends m{constructor(){super();this.setTitle("Redeem your credit"),this.contentEl.append(jsx("p",null,jsx("label",{class:"input-label"},"Your gift code"),this.codeField=jsx("input",{type:"text",placeholder:"Enter your gift code...",style:"width: 100%;"}))),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.redeemGift.bind(this)},"Redeem"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel")))}redeemGift(){return d(this,null,function*(){try{let e=this.codeField.value;if(e===""){this.showError("Please enter a redeem code.");return}yield ye({code:e}),new qe().open()}catch(e){new pe(e).open()}})}},ve=class extends w{constructor(e,t,r){super();this.link=`${location.origin}/account?giftcode=${e}`,r?this.setTitle("Successfully sent gift"):this.setTitle("Copied redeem link"),this.contentEl.append(jsx(jsxFragment,null,r?jsx("p",null,"You just sent a gift of ",v(t),' to "',r,'"!'):"",jsx("p",null,"The link to redeem the gift has been copied to your clipboard."),jsx("p",null,this.linkField=jsx("input",{type:"text",class:"mt-2 w-full",value:this.link}))))}onOpen(){super.onOpen(),navigator.clipboard.writeText(this.link),this.linkField.select()}},Ge=class extends w{constructor(e,t,r){super();this.code=e,r?this.setTitle("Successfully sent gift"):this.setTitle("Copied redeem code"),this.contentEl.append(jsx(jsxFragment,null,r?jsx("p",null,"You just sent a gift of ",v(t),' to "',r,'"!'):"",jsx("p",null,"The gift redeem code has been copied to your clipboard."),jsx("p",null,this.codeField=jsx("input",{type:"text",class:"mt-2 w-full",value:e}))))}onOpen(){super.onOpen(),navigator.clipboard.writeText(this.code),this.codeField.select()}},qe=class extends w{constructor(){super(),this.setTitle("Gift redeemed"),this.contentEl.append(jsx("p",null,"Your gift was successfully redeemed!"),jsx("p",null,'You should be able to see the credit in the "Eighred Credit" section. You can use it to buy whatever you want, or even gift to others.'))}onClose(){super.onClose(),K(),location.reload()}},pe=class extends m{constructor(a){super(),this.setTitle("Gift not redeemed"),this.contentEl.append(jsx("p",null,"Unfortunately, we were unable to redeem your gift for you.")),this.showError(a)}}});function M(o,a,e){if(a<0||a>31||o>>>a)throw new RangeError("Value out of range");for(let t=a-1;t>=0;t--)e.push(o>>>t&1)}function _(o,a){return(o>>>a&1)!=0}function B(o){if(!o)throw new Error("Assertion error")}function ja(o,a=10,e=H.HIGH,t=2){let r=G.encodeText(o,e),s=r.size+t,l=createDiv();l.setCssStyles({display:"flex",flexDirection:"column"});for(let i=-t;i<s;i++){let n=l.createDiv();n.setCssStyles({display:"flex",flexDirection:"row",justifyContent:"center"});for(let u=-t;u<s;u++){let y=r.getModule(i,u);n.createDiv().setCssStyles({width:`${a}px`,height:`${a}px`,backgroundColor:y?"black":"white"})}}return l}var c,G,E,Q,fe,H,ae,q,Xa=h(()=>{c=class{constructor(a,e,t,r){this.version=a;this.errorCorrectionLevel=e;this.modules=[];this.isFunction=[];if(a<c.MIN_VERSION||a>c.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=a*4+17;let s=[];for(let i=0;i<this.size;i++)s.push(!1);for(let i=0;i<this.size;i++)this.modules.push(s.slice()),this.isFunction.push(s.slice());this.drawFunctionPatterns();let l=this.addEccAndInterleave(t);if(this.drawCodewords(l),r==-1){let i=1e9;for(let n=0;n<8;n++){this.applyMask(n),this.drawFormatBits(n);let u=this.getPenaltyScore();u<i&&(r=n,i=u),this.applyMask(n)}}B(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(a,e){let t=Q.makeSegments(a);return c.encodeSegments(t,e)}static encodeBinary(a,e){let t=Q.makeBytes(a);return c.encodeSegments([t],e)}static encodeSegments(a,e,t=1,r=40,s=-1,l=!0){if(!(c.MIN_VERSION<=t&&t<=r&&r<=c.MAX_VERSION)||s<-1||s>7)throw new RangeError("Invalid value");let i,n;for(i=t;;i++){let f=c.getNumDataCodewords(i,e)*8,g=Q.getTotalBits(a,i);if(g<=f){n=g;break}if(i>=r)throw new RangeError("Data too long")}for(let f of[H.MEDIUM,H.QUARTILE,H.HIGH])l&&n<=c.getNumDataCodewords(i,f)*8&&(e=f);let u=[];for(let f of a){M(f.mode.modeBits,4,u),M(f.numChars,f.mode.numCharCountBits(i),u);for(let g of f.getData())u.push(g)}B(u.length==n);let y=c.getNumDataCodewords(i,e)*8;B(u.length<=y),M(0,Math.min(4,y-u.length),u),M(0,(8-u.length%8)%8,u),B(u.length%8==0);for(let f=236;u.length<y;f^=253)M(f,8,u);let x=[];for(;x.length*8<u.length;)x.push(0);return u.forEach((f,g)=>x[g>>>3]|=f<<7-(g&7)),new c(i,e,x,s)}getModule(a,e){return 0<=a&&a<this.size&&0<=e&&e<this.size&&this.modules[e][a]}drawFunctionPatterns(){for(let t=0;t<this.size;t++)this.setFunctionModule(6,t,t%2==0),this.setFunctionModule(t,6,t%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let a=this.getAlignmentPatternPositions(),e=a.length;for(let t=0;t<e;t++)for(let r=0;r<e;r++)t==0&&r==0||t==0&&r==e-1||t==e-1&&r==0||this.drawAlignmentPattern(a[t],a[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(a){let e=this.errorCorrectionLevel.formatBits<<3|a,t=e;for(let s=0;s<10;s++)t=t<<1^(t>>>9)*1335;let r=(e<<10|t)^21522;B(r>>>15==0);for(let s=0;s<=5;s++)this.setFunctionModule(8,s,_(r,s));this.setFunctionModule(8,7,_(r,6)),this.setFunctionModule(8,8,_(r,7)),this.setFunctionModule(7,8,_(r,8));for(let s=9;s<15;s++)this.setFunctionModule(14-s,8,_(r,s));for(let s=0;s<8;s++)this.setFunctionModule(this.size-1-s,8,_(r,s));for(let s=8;s<15;s++)this.setFunctionModule(8,this.size-15+s,_(r,s));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let a=this.version;for(let t=0;t<12;t++)a=a<<1^(a>>>11)*7973;let e=this.version<<12|a;B(e>>>18==0);for(let t=0;t<18;t++){let r=_(e,t),s=this.size-11+t%3,l=Math.floor(t/3);this.setFunctionModule(s,l,r),this.setFunctionModule(l,s,r)}}drawFinderPattern(a,e){for(let t=-4;t<=4;t++)for(let r=-4;r<=4;r++){let s=Math.max(Math.abs(r),Math.abs(t)),l=a+r,i=e+t;0<=l&&l<this.size&&0<=i&&i<this.size&&this.setFunctionModule(l,i,s!=2&&s!=4)}}drawAlignmentPattern(a,e){for(let t=-2;t<=2;t++)for(let r=-2;r<=2;r++)this.setFunctionModule(a+r,e+t,Math.max(Math.abs(r),Math.abs(t))!=1)}setFunctionModule(a,e,t){this.modules[e][a]=t,this.isFunction[e][a]=!0}addEccAndInterleave(a){let e=this.version,t=this.errorCorrectionLevel;if(a.length!=c.getNumDataCodewords(e,t))throw new RangeError("Invalid argument");let r=c.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][e],s=c.ECC_CODEWORDS_PER_BLOCK[t.ordinal][e],l=Math.floor(c.getNumRawDataModules(e)/8),i=r-l%r,n=Math.floor(l/r),u=[],y=c.reedSolomonComputeDivisor(s);for(let f=0,g=0;f<r;f++){let O=a.slice(g,g+n-s+(f<i?0:1));g+=O.length;let $=c.reedSolomonComputeRemainder(O,y);f<i&&O.push(0),u.push(O.concat($))}let x=[];for(let f=0;f<u[0].length;f++)u.forEach((g,O)=>{(f!=n-s||O>=i)&&x.push(g[f])});return B(x.length==l),x}drawCodewords(a){if(a.length!=Math.floor(c.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let e=0;for(let t=this.size-1;t>=1;t-=2){t==6&&(t=5);for(let r=0;r<this.size;r++)for(let s=0;s<2;s++){let l=t-s,n=(t+1&2)==0?this.size-1-r:r;!this.isFunction[n][l]&&e<a.length*8&&(this.modules[n][l]=_(a[e>>>3],7-(e&7)),e++)}}B(e==a.length*8)}applyMask(a){if(a<0||a>7)throw new RangeError("Mask value out of range");for(let e=0;e<this.size;e++)for(let t=0;t<this.size;t++){let r;switch(a){case 0:r=(t+e)%2==0;break;case 1:r=e%2==0;break;case 2:r=t%3==0;break;case 3:r=(t+e)%3==0;break;case 4:r=(Math.floor(t/3)+Math.floor(e/2))%2==0;break;case 5:r=t*e%2+t*e%3==0;break;case 6:r=(t*e%2+t*e%3)%2==0;break;case 7:r=((t+e)%2+t*e%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[e][t]&&r&&(this.modules[e][t]=!this.modules[e][t])}}getPenaltyScore(){let a=0;for(let s=0;s<this.size;s++){let l=!1,i=0,n=[0,0,0,0,0,0,0];for(let u=0;u<this.size;u++)this.modules[s][u]==l?(i++,i==5?a+=c.PENALTY_N1:i>5&&a++):(this.finderPenaltyAddHistory(i,n),l||(a+=this.finderPenaltyCountPatterns(n)*c.PENALTY_N3),l=this.modules[s][u],i=1);a+=this.finderPenaltyTerminateAndCount(l,i,n)*c.PENALTY_N3}for(let s=0;s<this.size;s++){let l=!1,i=0,n=[0,0,0,0,0,0,0];for(let u=0;u<this.size;u++)this.modules[u][s]==l?(i++,i==5?a+=c.PENALTY_N1:i>5&&a++):(this.finderPenaltyAddHistory(i,n),l||(a+=this.finderPenaltyCountPatterns(n)*c.PENALTY_N3),l=this.modules[u][s],i=1);a+=this.finderPenaltyTerminateAndCount(l,i,n)*c.PENALTY_N3}for(let s=0;s<this.size-1;s++)for(let l=0;l<this.size-1;l++){let i=this.modules[s][l];i==this.modules[s][l+1]&&i==this.modules[s+1][l]&&i==this.modules[s+1][l+1]&&(a+=c.PENALTY_N2)}let e=0;for(let s of this.modules)e=s.reduce((l,i)=>l+(i?1:0),e);let t=this.size*this.size,r=Math.ceil(Math.abs(e*20-t*10)/t)-1;return B(0<=r&&r<=9),a+=r*c.PENALTY_N4,B(0<=a&&a<=2568888),a}getAlignmentPatternPositions(){if(this.version==1)return[];{let a=Math.floor(this.version/7)+2,e=this.version==32?26:Math.ceil((this.version*4+4)/(a*2-2))*2,t=[6];for(let r=this.size-7;t.length<a;r-=e)t.splice(1,0,r);return t}}static getNumRawDataModules(a){if(a<c.MIN_VERSION||a>c.MAX_VERSION)throw new RangeError("Version number out of range");let e=(16*a+128)*a+64;if(a>=2){let t=Math.floor(a/7)+2;e-=(25*t-10)*t-55,a>=7&&(e-=36)}return B(208<=e&&e<=29648),e}static getNumDataCodewords(a,e){return Math.floor(c.getNumRawDataModules(a)/8)-c.ECC_CODEWORDS_PER_BLOCK[e.ordinal][a]*c.NUM_ERROR_CORRECTION_BLOCKS[e.ordinal][a]}static reedSolomonComputeDivisor(a){if(a<1||a>255)throw new RangeError("Degree out of range");let e=[];for(let r=0;r<a-1;r++)e.push(0);e.push(1);let t=1;for(let r=0;r<a;r++){for(let s=0;s<e.length;s++)e[s]=c.reedSolomonMultiply(e[s],t),s+1<e.length&&(e[s]^=e[s+1]);t=c.reedSolomonMultiply(t,2)}return e}static reedSolomonComputeRemainder(a,e){let t=e.map(r=>0);for(let r of a){let s=r^t.shift();t.push(0),e.forEach((l,i)=>t[i]^=c.reedSolomonMultiply(l,s))}return t}static reedSolomonMultiply(a,e){if(a>>>8||e>>>8)throw new RangeError("Byte out of range");let t=0;for(let r=7;r>=0;r--)t=t<<1^(t>>>7)*285,t^=(e>>>r&1)*a;return B(t>>>8==0),t}finderPenaltyCountPatterns(a){let e=a[1];B(e<=this.size*3);let t=e>0&&a[2]==e&&a[3]==e*3&&a[4]==e&&a[5]==e;return(t&&a[0]>=e*4&&a[6]>=e?1:0)+(t&&a[6]>=e*4&&a[0]>=e?1:0)}finderPenaltyTerminateAndCount(a,e,t){return a&&(this.finderPenaltyAddHistory(e,t),e=0),e+=this.size,this.finderPenaltyAddHistory(e,t),this.finderPenaltyCountPatterns(t)}finderPenaltyAddHistory(a,e){e[0]==0&&(a+=this.size),e.pop(),e.unshift(a)}},G=c;G.MIN_VERSION=1,G.MAX_VERSION=40,G.PENALTY_N1=3,G.PENALTY_N2=3,G.PENALTY_N3=40,G.PENALTY_N4=10,G.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],G.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];E=class{constructor(a,e,t){this.mode=a;this.numChars=e;this.bitData=t;if(e<0)throw new RangeError("Invalid argument");this.bitData=t.slice()}static makeBytes(a){let e=[];for(let t of a)M(t,8,e);return new E(q.BYTE,a.length,e)}static makeNumeric(a){if(!E.isNumeric(a))throw new RangeError("String contains non-numeric characters");let e=[];for(let t=0;t<a.length;){let r=Math.min(a.length-t,3);M(parseInt(a.substring(t,t+r),10),r*3+1,e),t+=r}return new E(q.NUMERIC,a.length,e)}static makeAlphanumeric(a){if(!E.isAlphanumeric(a))throw new RangeError("String contains unencodable characters in alphanumeric mode");let e=[],t;for(t=0;t+2<=a.length;t+=2){let r=E.ALPHANUMERIC_CHARSET.indexOf(a.charAt(t))*45;r+=E.ALPHANUMERIC_CHARSET.indexOf(a.charAt(t+1)),M(r,11,e)}return t<a.length&&M(E.ALPHANUMERIC_CHARSET.indexOf(a.charAt(t)),6,e),new E(q.ALPHANUMERIC,a.length,e)}static makeSegments(a){return a==""?[]:E.isNumeric(a)?[E.makeNumeric(a)]:E.isAlphanumeric(a)?[E.makeAlphanumeric(a)]:[E.makeBytes(E.toUtf8ByteArray(a))]}static makeEci(a){let e=[];if(a<0)throw new RangeError("ECI assignment value out of range");if(a<128)M(a,8,e);else if(a<16384)M(2,2,e),M(a,14,e);else if(a<1e6)M(6,3,e),M(a,21,e);else throw new RangeError("ECI assignment value out of range");return new E(q.ECI,0,e)}static isNumeric(a){return E.NUMERIC_REGEX.test(a)}static isAlphanumeric(a){return E.ALPHANUMERIC_REGEX.test(a)}getData(){return this.bitData.slice()}static getTotalBits(a,e){let t=0;for(let r of a){let s=r.mode.numCharCountBits(e);if(r.numChars>=1<<s)return 1/0;t+=4+s+r.bitData.length}return t}static toUtf8ByteArray(a){a=encodeURI(a);let e=[];for(let t=0;t<a.length;t++)a.charAt(t)!="%"?e.push(a.charCodeAt(t)):(e.push(parseInt(a.substring(t+1,t+3),16)),t+=2);return e}},Q=E;Q.NUMERIC_REGEX=/^[0-9]*$/,Q.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,Q.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";fe=class{constructor(a,e){this.ordinal=a;this.formatBits=e}},H=fe;H.LOW=new fe(0,1),H.MEDIUM=new fe(1,0),H.QUARTILE=new fe(2,3),H.HIGH=new fe(3,2);ae=class{constructor(a,e){this.modeBits=a;this.numBitsCharCount=e}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}},q=ae;q.NUMERIC=new ae(1,[10,12,14]),q.ALPHANUMERIC=new ae(2,[9,11,13]),q.BYTE=new ae(4,[8,16,16]),q.KANJI=new ae(8,[8,10,12]),q.ECI=new ae(7,[0,0,0])});var Pt,Tt,At,kt,Lt,Mt,Dt,Ye,Ka=h(()=>{V();A();R();j();te();X();Xa();Pt=class extends m{constructor(e){super();this.userInfo=e,this.setTitle("Change your email"),this.contentEl.append(jsx(jsxFragment,null,jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"New email"),this.emailEl=jsx("input",{class:"input w-full max-w-sm",type:"email",placeholder:"Enter your new email address..."})),jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"Password"),this.passwordEl=jsx("input",{class:"input w-full max-w-sm",type:"password",placeholder:"Enter your password..."})),this.mfaSectionEl=jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"6-digit code"),this.mfaEl=jsx("input",{class:"input w-full max-w-sm",inputMode:"numeric",type:"text"})))),this.mfaSectionEl.toggle(e.mfa),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.update.bind(this)},"Confirm change"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel"))),J(this.emailEl,()=>this.passwordEl.focus()),J(this.passwordEl,()=>this.update())}update(){return d(this,null,function*(){let e=this.emailEl.value,t=this.passwordEl.value,r=this.mfaEl.value;if(e===""){this.showError("New email cannot be empty.");return}if(t===""){this.showError("Password cannot be empty.");return}if(this.userInfo.mfa&&r===""){this.showError("Please enter the 6-digit code generated by your authenticator app to confirm email change.");return}try{yield da({email:e,password:t,mfa:r}),this.close(),new k("Successfully updated","Your email has been successfully updated!").open()}catch(s){s.contains("2FA code required")&&this.mfaSectionEl.show(),this.showError(s)}})}},Tt=class extends m{constructor(){super();this.setTitle("Change your name"),this.contentEl.append(jsx("p",null,jsx("label",{class:"input-label"},"New name"),this.nameEl=jsx("input",{class:"input w-full change-name-new-name",type:"text",placeholder:"Enter your new name..."}))),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.update.bind(this)},"Confirm change"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel"))),J(this.nameEl,()=>this.update())}update(){return d(this,null,function*(){let e=this.nameEl.value;if(e===""){this.showError("New name cannot be empty.");return}try{yield ua({name:e}),this.close(),new k("Successfully updated","Your name has been successfully updated!").open()}catch(t){this.showError(t)}})}},At=class extends m{constructor(){super();this.setTitle("Change your password"),this.contentEl.append(jsx(jsxFragment,null,jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"Current password"),this.oldPassEl=jsx("input",{class:"input w-full max-w-sm",type:"password",placeholder:"Enter your old password..."})),jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"New password"),this.newPassEl=jsx("input",{class:"input w-full max-w-sm",type:"password",placeholder:"Enter your new password..."})))),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.update.bind(this)},"Confirm change"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel"))),J(this.oldPassEl,()=>this.newPassEl.focus()),J(this.newPassEl,()=>this.update())}update(){return d(this,null,function*(){let e=this.oldPassEl.value,t=this.newPassEl.value;if(e===""){this.showError("Current password cannot be empty.");return}if(t===""){this.showError("New password cannot be empty.");return}try{yield pa({old_password:e,new_password:t}),this.close(),new k("Successfully updated","Your password has been successfully updated!").open()}catch(r){this.showError(r)}})}},kt=class extends m{constructor(e,t){super();this.secret=e,this.setTitle("Enable 2-factor authentication");let r;this.contentEl.append(jsx("form",{id:"mfa-form",onsubmit:this.update.bind(this)},jsx("p",{class:"mb-2 font-semibold"},"Step 1: Download an authenticator app"),jsx("p",{class:"mb-2"},"Download and install an authenticator app on your phone, such as Google Authenticator or\xA0Authy."),jsx("p",{class:"mb-2 font-semibold"},"Step 2: Scan the QR code"),jsx("p",{class:"mb-2"},"Scan the QR code below with your authenticator app, or use the setup key below."),r=jsx("p",{className:"my-8"}),jsx("p",{class:"my-8"},jsx("input",{type:"text",class:"w-full",value:e,readOnly:!0})),jsx("p",{class:"mb-2 font-semibold"},"Step 3: Verify your code"),jsx("p",{class:"mb-2"},"Enter the 6 digit code generated by your authenticator app"),jsx("p",{class:"my-2"},this.codeEl=jsx("input",{class:"input w-full max-w-sm",type:"text",placeholder:"Enter 6-digit code...",required:!0})),jsx("p",{class:"mt-6 mb-2 font-semibold"},"Step 4: Enter your current password to confirm"),jsx("p",{class:"my-2"},this.passwordEl=jsx("input",{class:"input w-full max-w-sm",type:"password",placeholder:"Enter password to confirm...",autocomplete:"current-password",required:!0})))),r.appendChild(ja(t,5,H.LOW)),this.buttonContainerEl.append(jsx(jsxFragment,null,this.submitBtnEl=jsx("button",{type:"submit",class:"button button-primary"},"Complete set up"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel"))),this.submitBtnEl.setAttr("form","mfa-form")}update(e){return d(this,null,function*(){e.preventDefault();let t=this.codeEl.value,r=this.passwordEl.value;if(t===""){this.showError("Please enter the 6-digit code generated by your authenticator app to enable 2FA.");return}if(r===""){this.showError("Please enter your password to enable 2FA.");return}try{yield tt({secret:this.secret,password:r,mfa:t}),this.close(),new k("2-factor authentication is ready","You have successsfully set up 2FA to protect your account!").open()}catch(s){this.showError(s)}})}},Lt=class extends m{constructor(){super();this.setTitle("Disable 2-factor authentication"),this.contentEl.append(jsx(jsxFragment,null,jsx("p",{class:"mb-2"},"Verify your identity by entering your current password and 6-digit verficiation code from your authenticator app."),jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"Password"),this.passwordEl=jsx("input",{class:"input w-full max-w-sm",type:"password",placeholder:"Enter password..."})),jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"6-digit code"),this.codeEl=jsx("input",{class:"input w-full max-w-sm",type:"number",placeholder:"000000"})))),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.update.bind(this)},"Disable 2FA"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel")))}update(){return d(this,null,function*(){let e=this.codeEl.value,t=this.passwordEl.value;if(e===""){this.showError("Please enter the 6-digit code generated by your authenticator app to disable 2FA.");return}if(t===""){this.showError("Please enter your password to confirm disabling 2FA.");return}try{yield la({password:t,mfa:e}),this.close(),new k("2-factor authentication is disabled","You have successsfully disabled 2-factor authentication on your account.").open()}catch(r){this.showError(r)}})}},Mt=class extends m{constructor(){super();this.setTitle("Log out everywhere"),this.contentEl.append(jsx(jsxFragment,null,jsx("p",null,"Any devices currently logged into your Eighred account will lose their connection."),jsx("p",{class:"my-2 text-red-500"},"This action is not reversible."),jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"Password"),this.passwordEl=jsx("input",{class:"input w-full max-w-sm",type:"password",placeholder:"Enter your password to confirm...",autocomplete:"current-password",required:!0})))),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-danger",onclick:this.confirm.bind(this)},"Confirm log out"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel"))),J(this.passwordEl,()=>this.confirm())}confirm(){return d(this,null,function*(){let e=this.passwordEl.value;if(e===""){this.showError("You must enter your current password to confirm.");return}try{yield na({password:e}),this.close(),window.location.reload()}catch(t){this.showError(t)}})}},Dt=class extends m{constructor(e){super();this.userInfo=e,this.setTitle("Delete your account"),this.contentEl.append(jsx(jsxFragment,null,jsx("p",{class:"mb-2"},"Deleting your account is a permanent action with significant consequences. Before proceeding, carefully review the following information:"),jsx("ul",{class:"list-disc pl-4 marker:text-faint my-4"},jsx("li",null,"All your commercial licenses and Catalyst licenses will be\xA0revoked."),jsx("li",null,"Your subscriptions to Eighred Publish and Eighred Cloud will be\xA0terminated."),jsx("li",null,"Your Eighred Cloud remote room and Eighred Publish sites will be permanently deleted."),jsx("li",null,"Payments associated with your account will not be eligible for refunds.")),jsx("p",{class:"my-2 text-red-500"},"Important: Account deletion is irreversible. Once your account is deleted, it cannot be recovered under any circumstances."),jsx("p",{class:"my-2"},"If you fully understand the consequences outlined above and still wish to proceed, please confirm by entering your email and password below:"),jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"Email"),this.emailEl=jsx("input",{class:"input w-full max-w-sm",type:"email",placeholder:"Enter email to confirm..."})),jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"Password"),this.passwordEl=jsx("input",{class:"input w-full max-w-sm",type:"password",placeholder:"Enter password to confirm..."})),this.mfaSectionEl=jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"6-digit code"),this.mfaEl=jsx("input",{class:"input w-full max-w-sm",inputMode:"numeric",type:"text"})))),this.mfaSectionEl.toggle(e.mfa),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-danger mod-warning",onclick:this.update.bind(this)},"Confirm deletion"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel"))),J(this.emailEl,()=>this.passwordEl.focus())}update(){return d(this,null,function*(){let e=this.emailEl.value,t=this.passwordEl.value,r=this.mfaEl.value;if(e===""){this.showError("Please enter your email to confirm account deletion.");return}if(t===""){this.showError("Please enter your password to confirm account deletion.");return}if(this.userInfo.mfa&&r===""){this.showError("Please enter the 6-digit code generated by your authenticator app to confirm account deletion.");return}try{yield fa({email:e,password:t,mfa:r}),this.close(),new k("Successfully deleted","Your account is now deleted!").open()}catch(s){s.contains("2FA code required")&&this.mfaSectionEl.show(),this.showError(s)}})}},Ye=class extends L{constructor(e){super("account","Account","Your account",S(pt));this.page=e;let t=this.settings=new I(this.contentEl);this.nameSetting=t.addSetting(new b().setName("Name").addButton("Change",()=>{new Tt().open()})),this.nameSetting.descEl.className="text-xl",this.emailSetting=t.addSetting(new b().setName("Email").addButton("Change",()=>{new Pt(e.data).open()})),this.emailSetting.descEl.className="text-xl",t.addSetting(new b().setName("Password").setDesc("Change your account\xA0password.").addButton("Change",()=>{new At().open()})),this.mfaSetting=t.addSetting(new b().setName("2-factor authentication").setDesc("Protect your account with a second verification\xA0step.")),t.addSetting(new b().setName("Contact support").setDesc("Reach us for account, billing, or paid service\xA0inquiries.").addLink("Email us","mailto:support@eighred.com")),t.addSetting(new b().setName("Log out everywhere").setDesc("Log out on all devices for security reasons. You will need to log in again on each\xA0device.").addButton("Log out",()=>{new Mt().open()})),t.addSetting(new b().setName("Delete account").setDesc("Permanently delete your account, licenses, and subscriptions. You will be asked for confirmation before deletion\xA0proceeds.").addDangerButton("Delete",()=>{new Dt(e.data).open()}))}update(){let{data:e}=this.page;this.nameSetting.setDesc(e.name),this.emailSetting.setDesc(e.email),e.mfa?(this.mfaSetting.addButton("Disable",()=>{new Lt().open()}),this.mfaSetting.setDesc("2FA is enabled for your account.")):this.mfaSetting.addButton("Enable",()=>d(this,null,function*(){let t=yield tt();new kt(t.secret,t.url).open()}))}}});var me,Bt,Rt,It=h(()=>{A();R();Y();me=class extends D{constructor(){super();this.setTitle("Your invoices"),this.contentEl.appendChild(this.invoiceEl=jsx("div",{class:"invoice-list space-y-4 divide-y divide-gray-700"}))}onOpen(){return d(this,null,function*(){let{invoiceEl:e}=this;e.empty();let t=yield Ca();for(let r of t)e.createDiv({cls:"invoice-item setting pt-4 flex gap-6 items-center"},s=>{s.createDiv({cls:"setting-item-info"},l=>{l.createDiv({text:r.description,cls:"setting-item-name"}),l.createDiv({text:T(r.created),cls:"text-muted leading-5 text-sm"})}),s.createDiv({cls:"setting-item-control ml-auto"},l=>{l.createEl("button",{cls:"button",text:"View"},i=>{i.addEventListener("click",()=>{let n=new Bt;n.display(r),n.open()})}),r.refundable&&l.createEl("a",{text:"Refund",cls:"button ml-2"},i=>{i.addEventListener("click",()=>{new Rt(r).open(),fish(".modal-container.mod-confirm-refund").show()})})})});t.length===0&&e.append(jsx("p",null,"There are no invoices for this account."))})}},Bt=class extends D{constructor(){super();this.setTitle("Invoice #"),this.contentEl.append(jsx("div",{class:"print-invoice flex mb-6 print:hidden"},jsx("button",{class:"button button-primary",onclick:()=>window.print()},"Print invoice"))),this.contentEl.appendChild(jsx("div",{class:"invoice-box print:text-black print:w-full"},jsx("table",{cellPadding:"0",cellSpacing:"0",class:"print:w-full"},jsx("tbody",null,jsx("tr",null,jsx("td",{colSpan:2},jsx("table",{class:"print:w-full"},jsx("tbody",null,jsx("tr",null,jsx("td",{class:"py-4 border-b border-gray-700"},jsx("div",null,jsx("b",{class:"text-lg"},"Eighred Limited")),jsx("div",{class:"text-sm"},"1376 Ferncrest Road",jsx("br",null),"Oakville, L6H 7W3",jsx("br",null),"Ontario, Canada",jsx("br",null),"GST/HST 75064 9899 RT0001")),jsx("td",{class:"py-4 border-b border-gray-700 text-right"},jsx("div",null,jsx("b",null,"Invoice #",this.invoiceNumberEl=jsx("span",null))),this.dateEl=jsx("div",{class:"text-sm"}))))))),jsx("tr",null,jsx("td",{colSpan:2,class:"py-4"},jsx("div",null,jsx("b",null,"Bill to")),this.billingInfoEl=jsx("div",{class:"my-2 py-1 px-2 w-[102%] inline-block whitespace-pre-wrap rounded -ml-2 hover:cursor-pointer hover:ring hover:ring-gray-600 hover:bg-gray-800 focus:outline-none focus:ring focus:ring-accent-600 focus:cursor-text",contentEditable:"true"},"Click to edit your billing information"))),jsx("tr",{class:"heading border-b border-gray-700 tabular-nums"},jsx("td",{class:"pt-4 pb-2"},jsx("b",null,"Items")),jsx("td",{class:"pt-4 pb-2 text-right"},jsx("b",null,"Price"))),jsx("tr",{class:"item border-b border-gray-700 tabular-nums"},this.descEl=jsx("td",{class:"py-2"}),jsx("td",{class:"py-2 text-right"},"$",this.amountEl=jsx("span",null)," USD")),this.refundEl=jsx("tr",{class:"item mod-refund tabular-nums"},jsx("td",{class:"py-2"},"Refund"),jsx("td",{class:"py-2 text-right"},"-$",this.refundAmountEl=jsx("span",null)," USD")),jsx("tr",{class:"total tabular-nums"},jsx("td",{class:"py-2"}),jsx("td",{class:"py-2 text-right"},jsx("b",null,"Total:")," $",this.totalEl=jsx("span",null)," USD")))))),this.billingInfoEl.addEventListener("input",()=>{localStorage.setItem("billing-info",this.billingInfoEl.getText())})}display(e){let t=(e.amount/100).toFixed(2),r=(e.refunded/100).toFixed(2),s=((e.amount-e.refunded)/100).toFixed(2),l=e.refunded!==0,i=localStorage.getItem("billing-info"),n=e.receipt_number||e.id;this.setTitle("Invoice #"+n),this.invoiceNumberEl.setText(n),this.dateEl.setText(T(e.created)),this.descEl.setText(e.description),this.amountEl.setText(t),this.refundEl.toggle(l),l&&this.refundAmountEl.setText(r),this.totalEl.setText(s),i&&this.billingInfoEl.setText(i)}},Rt=class extends m{constructor(e){super();this.info=e,this.setTitle("Confirm refund"),this.contentEl.append(jsx(jsxFragment,null,jsx("p",null," Would you like to request a refund for this payment? "),jsx("p",null,e.description),jsx("p",{class:"text-red-500 my-2"},"The service or license you purchased will be removed, and this action is not\xA0reversible. Your auto-renewal will also be cancelled."))),e.service==="Cloud"?this.contentEl.append(jsx("p",{class:"text-red-500 my-2"},"Your Eighred Cloud remote room will be immediately deleted.")):e.service==="publish"&&this.contentEl.append(jsx("p",{class:"text-red-500 my-2"},"Your Eighred Publish sites will be immediately deleted.")),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.update.bind(this)},"Request refund"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel")))}update(){return d(this,null,function*(){try{yield Sa({charge:this.info.id,type:this.info.type}),new k("Refund success",createFragment(e=>e.append(jsx(jsxFragment,null,jsx("p",null,"Your refund request has been successfully processed!"),jsx("p",null,"The service or license you purchased has been removed, and your auto-renewal has been cancelled."),jsx("p",null,"You should receive your refund in a few business days. Thanks for trying Eighred!"))))).open()}catch(e){fish(".refund-failed-reason").setText(e),fish(".modal-container.mod-refund-failed").show(),new k("Refund failed",createFragment(t=>t.append(jsx(jsxFragment,null,jsx("p",null,"Automatic refund has failed. ",jsx("span",null,e.toString())),jsx("p",null,"If you believe you still qualify for a refund, you can contact our support at support@eighred.com."))))).open()}})}}});var Ht,ze,Ft,Ve,Ja=h(()=>{V();A();It();R();ee();j();X();Y();Ht=class{constructor(a){this.value=!1;(this.el=a.createEl("span","checkbox-container")).addEventListener("click",()=>this.setValue(!this.value))}setValue(a){this.value=a,this.el.toggleClass("is-enabled",this.value)}getValue(){return this.value}},ze=class extends W{constructor(){super();this.paypalUseroom=!0;this.currentSeats=0;this.setTitle("Commercial license"),this.containerEl.addClass("mod-commercial-license")}createPayment(e){super.createPayment(e),this.businessNameContainerEl=e.createEl("p",{},t=>{t.createEl("label",{cls:"input-label",text:"Business name"}),this.businessNameEl=t.createEl("input",{cls:"input w-full",type:"text",placeholder:"Name of your business..."})}),e.createEl("p",{},t=>{t.createEl("label",{cls:"input-label mt-2",text:"Seats"}),this.seatsEl=t.createEl("input",{cls:"input",type:"number",placeholder:"1",attr:{min:1,value:1}})}),this.autoRenewalContainerEl=e.createEl("p",{},t=>{t.createEl("label",{cls:"input-label mt-2",text:"Auto-renewal"}),this.autoRenewal=new Ht(t)}),this.seatsEl.addEventListener("input",this.updatePrice.bind(this))}setStatus(e,t){return this.currentSeats=e,e===0?this.setTitle("Commercial license"):this.setTitle("Add seats"),this.businessNameContainerEl.toggle(e===0),this.autoRenewalContainerEl.toggle(e===0),this.autoRenewal.setValue(t),this}getPriceData(){let{currentSeats:e}=this,t=this.seatsEl.value;if(t==="")return null;let r=parseInt(t);if(isNaN(r)||r<=0)return null;let s=this.autoRenewal.getValue()?"yearly":"";return{type:"business",variation:(e+r).toString(),renew:s}}afterPay(){return d(this,null,function*(){let e=this.businessNameEl.value;if(e)try{yield ha({company:e})}catch(t){this.showError(t);return}window.location.reload()})}validate(){return d(this,null,function*(){let{currentSeats:e}=this;if(e===0&&!this.businessNameEl.value)throw"Please enter a business name.";return!0})}onOpen(){super.onOpen(),this.updatePrice()}},Ft=class extends m{constructor(e){super();this.currentSeats=e,this.setTitle("Reduce your number of seats"),this.contentEl.append(jsx("p",null,jsx("label",{class:"input-label"},"Seats to remove"),this.amountEl=jsx("input",{class:"commercial-license-reduce-seat-input",type:"number",placeholder:"Enter a number...",min:"1",value:"1",step:"1"}))),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.update.bind(this)},"Update"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel")))}update(){return d(this,null,function*(){let e=this.amountEl.valueAsNumber,t=this.currentSeats;if(e===0){this.showError("The number of seats to remove cannot be 0.");return}let r=t-e;if(r<0){let s=t===1?"1 seat":t+" seats";this.showError("You currently have "+s+" and cannot remove more seats than that.");return}try{yield xa({seats:r}),this.close(),new k("Successfully updated","Your reduction of seats has been recorded!").open()}catch(s){this.showError(s)}})}},Ve=class extends L{constructor(e){super("commercial","License","Commercial license",S(st));this.page=e}update(){let{business:e}=this.page.subscriptions,{contentEl:t}=this;if(t.empty(),e&&e.expiry>=Date.now()){let{seats:r,expiry:s,key:l,company:i,renew:n}=e,u=r===1?"1 seat":r+" seats",y=T(s);t.append(jsx("div",null,jsx("p",null,"Your license key is: "),jsx("div",{class:"commercial-license-key",onclick:function(){navigator.clipboard.writeText(l),this.setText("Copied!"),this.addClass("is-copied"),setTimeout(()=>{this.setText(l),this.removeClass("is-copied")},500)}},l),jsx("p",null,'Registered to "',i,'" for ',u,". Valid until ",y,"."),jsx("p",null,"To activate the license, go to Settings \u2192 General in Eighred.")));let x=new I(t);x.addSetting(new b().setName("Seats").setDesc(`${u} purchased.`).addButton("Add seats",()=>{new ze().setStatus(r,!!n).open()}).addButton("Remove seats",()=>{new Ft(r).open()})),x.addSetting(new b().setName("Invoices").setDesc("View and print invoices for your commercial license.").addButton("View",()=>{new me().open()})),x.addSetting(new b().setName("Auto-renewal").setDesc(n?`Your next renewal will be ${y}.`:`Your license expires ${y}. Your license will not be\xA0renewed.`).addButton(n?"Stop":"Resume",()=>d(this,null,function*(){n?yield N({type:"business",renew:""}):yield N({type:"business",renew:"yearly"}),window.location.reload()}))),ne(x)}else t.append(jsx("div",{class:"flex gap-6 flex-col md:flex-row"},jsx("div",null,jsx("div",{class:"md:text-lg max-w-lg leading-tight"},"Eighred is free for personal use. For businesses with two or more people, a commercial license is required. ",jsx("a",{href:"/license",target:"_blank",class:"text-accent"},"Learn\xA0more.")),jsx("div",{class:"text-muted mb-6 text-xs sm:text-sm md:text-base mt-2"},"Eighred is free to use commercially for 14 days for evaluation\xA0purposes."),jsx("div",null,jsx("span",{class:"text-3xl font-semibold"},"$50")," ",jsx("span",{class:"text-sm text-muted"},"USD")),jsx("div",{class:"text-muted text-xs sm:text-sm"},"per user, per\xA0year")),jsx("div",{class:"md:ml-auto"},jsx("button",{class:"button button-sm sm:button-md button-primary",onclick:()=>new ze().setStatus(0,!0).open()},"Buy license"))))}}});var Ot,Nt,We,Qa=h(()=>{V();A();vt();St();It();R();ee();j();X();Y();Ot=class extends W{constructor(){super();this.paypalUseroom=!1;this.setTitle("Add credit to your account balance"),this.summaryEl.hide()}createPayment(e){e.appendChild(jsx("p",{class:"mb-6"},"Eighred Credit can be used to pay for any Eighred license or service. You can also send credit to anyone, such as friends, family, and\xA0coworkers.")),e.createEl("p",{},t=>{t.createEl("label",{cls:"input-label",text:"Amount of credit to purchase (USD)"}),this.amountEl=t.createEl("input",{type:"number",placeholder:"Credit amount",attr:{min:5,value:50,step:1}})}),this.amountEl.addEventListener("change",this.updatePrice.bind(this))}getPriceData(){let e=this.amountEl.value;if(e==="")return null;let t=parseInt(e);return isNaN(t)||t<=0?null:{type:"credit",variation:(t*100).toString(),renew:""}}afterPay(){return d(this,null,function*(){new Nt().open()})}onOpen(){super.onOpen(),this.updatePrice()}},Nt=class extends w{constructor(){super(),this.setTitle("Successfully bought Eighred Credit"),this.contentEl.append(jsx("p",null,"Thanks so much for supporting us by buying Eighred Credit!"),jsx("p",null,"You can now purchase Eighred Cloud, Eighred Publish, or any license with your credit. You can also gift it to others. "))}onClose(){super.onClose(),window.location.reload()}},We=class extends L{constructor(e){super("billing","Billing","Billing",S(lt));this.page=e;let t=this.settings=new I(this.contentEl);t.addSetting(new b().setName("Eighred Credit").setDesc(createFragment(r=>r.append(jsx(jsxFragment,null,jsx("div",{class:"text-normal text-lg pb-2 leading-6"},"$",this.creditAmountEl=jsx("span",null,"0")," USD balance"),jsx("div",{class:"text-muted leading-4 mt-1 text-xs sm:text-sm md:text-base max-w-xl"},"Credit can be used to pay for any Eighred license or service, including Cloud and Publish. Any credit you have will be used before we charge your card or\xA0PayPal."))))).addPrimaryButton("Buy credit",()=>new Ot().open()).addButton("Send credit",()=>new Ne(e.data.credit).open(),r=>this.sendCreditButtonEl=r)),t.addSetting(new b().setName("Invoices and refunds").setDesc("Download invoices for your past payments and request\xA0refunds.").addButton("View",()=>new me().open())),this.discountSetting=t.addSetting(new b().setName("Discount").addButton("Apply",()=>new Me().open(),r=>this.applyDiscountButtonEl=r)),this.giftSetting=t.addSetting(new b().setName("Gift history").addButton("Redeem",()=>new Ue().open()))}update(){let{discountSetting:e,applyDiscountButtonEl:t}=this,{credit:r,discount:s}=this.page.data;if(this.sendCreditButtonEl.toggle(r>0),this.creditAmountEl.setText(v(r)),s){if(s.status==="submitted")e.setDesc("You have submitted your school or organization email, but have not completed email verification yet. Please check your email for a link to verify your email address."),t.hide();else if(s.status==="verified")e.setDesc("Your discount application has been submitted for review. Thanks for your patience!"),t.hide();else if(s.status==="approved"){let{type:l,expiry_ts:i}=s;e.setDesc(`Your ${l} discount currently gives you 40% off the regular price of Eighred Cloud and Publish. Your discount will expire on ${T(i)}.`),t.setText("Renew")}}else e.setDesc(createFragment(l=>l.append(jsx(jsxFragment,null,"Students, faculty members, and nonprofit employees are eligible for a 40% discount on Eighred Cloud and\xA0Publish. ",jsx("a",{href:"https://help.eighred.com/Licenses+and+payment/Education+and+non-profit+discount",target:"_blank",class:"text-accent"},"Learn\xA0more."))))),t.show(),t.setText("Apply");this.updateGift(this.page.gifts)}updateGift(e){let{giftSetting:t}=this;if(t.setDesc("You haven't sent or received any\xA0credit."),!e||e.length===0)return;let r=createFragment();e.sort((s,l)=>s.ts-l.ts);for(let s of e)s.type==="sent"?r.append(jsx("p",null,"You sent $",v(s.amount),' to "',s.recipient,'" on ',T(s.ts),".",jsx("span",null," "),s.redeemed?jsx(jsxFragment,null,jsx("br",null),jsx("span",null,"Your gift was ",s.is_cancelled?"cancelled":"redeemed"," on ",T(s.redeemed_ts),".")):jsx(jsxFragment,null,"Copy ",jsx("a",{href:"#",class:"text-accent",onclick:l=>{l.preventDefault(),new ve(s.redeem_code).open()}},"redeem link"),jsx("span",null," or "),jsx("a",{href:"#",class:"text-accent",onclick:l=>{l.preventDefault(),new Ge(s.redeem_code).open()}},"redeem code"),".",jsx("br",null),jsx("span",null,"Waiting for recipient to redeem gift. "),jsx("a",{href:"#",class:"text-accent",onclick:l=>d(this,null,function*(){if(l.preventDefault(),!!confirm("Are you sure you want to cancel this gift? Your credit will be refunded, and the recipient will no longer be able to redeem it."))try{yield ye({code:s.redeem_code}),location.reload()}catch(n){new pe(n).open()}})},"Cancel this gift"),"."))):s.type==="received"&&r.append(jsx("p",null,"You redeemed $",v(s.amount)," worth of gift credit on ",T(s.ts),"."));t.setDesc(r)}}});var _e,Ut,Gt,Ce,qt,$e,Yt=h(()=>{V();A();R();ee();j();te();X();Y();_e=class extends ie{constructor(e,t){super();this.setTitle("Choose a Publish plan"),this.setSubscriptionPrices(e),this.setTermCard(t?this.monthlyCard:this.yearlyCard)}createPayment(e){super.createPayment(e);let t=e.createEl("p");t.createEl("label",{cls:"input-label",text:"Number of sites"}),this.numSitesEl=t.createEl("input",{type:"number",attr:{placeholder:"Enter a number...",min:1,value:1}}),this.numSitesEl.addEventListener("change",this.updatePrice.bind(this))}getPriceData(){return this.selectedCard?{type:"publish",variation:this.numSitesEl.value,renew:this.selectedCard.value}:null}afterPay(){this.close(),new Ut().open()}},Ut=class extends w{constructor(){super(),this.setTitle("Successfully bought Eighred Publish"),this.contentEl.append(jsx("p",null,"Thank you so much for supporting us by using Eighred Publish!"),jsx("p",{class:"my-2"},"To learn more about how to publish your notes, ",jsx("a",{href:"https://help.eighred.com/Eighred+Publish/Introduction+to+Eighred+Publish",class:"text-accent",target:"_blank"},"read this guide"),"."))}onClose(){super.onClose(),window.location.reload()}},Gt=class extends m{constructor(e){super();this.setTitle("Reduce your number of Publish sites"),this.contentEl.createEl("p",{},t=>{t.createEl("label",{cls:"input-label",text:"Number of sites"},r=>{r.createEl("br"),this.amountEl=r.createEl("input",{type:"number",placeholder:"Enter a number...",attr:{min:"1",value:String(e)}})})}),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.update.bind(this)},"Update"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel")))}update(){return d(this,null,function*(){let e=this.amountEl.valueAsNumber;try{yield ya({sites:e}),window.location.reload()}catch(t){this.showError(t)}})}},Ce=class extends m{constructor(e,t,r,s){super();this.code=e,this.setTitle("Publish site invite"),s?this.showError(s):(this.contentEl.append(jsx("p",null,t," (",r,") has invited you to collaborate on an Eighred Publish site together.")),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.acceptInvite.bind(this)},"Accept"),jsx("button",{onclick:this.close.bind(this)},"Cancel"))))}acceptInvite(){return d(this,null,function*(){try{yield Da({code:this.code}),this.close(),new qt().open()}catch(e){let t=new m;t.setTitle("Couldn't accept invite"),t.contentEl.append(jsx("p",null,"Unfortunately, something went wrong when accepting the invite.")),t.showError(e),this.close(),t.open()}})}},qt=class extends w{constructor(){super(),this.setTitle("Accepted invite"),this.contentEl.append(jsx("p",null,"You have successfully accepted the invite!"),jsx("p",null,"You can now go into the Eighred app, log in under Settings ","->",' Account, and enable the "Publish" core plugin to start collaborating on this site.'))}onClose(){super.onClose(),K(),location.reload()}},$e=class extends L{constructor(e){super("publish","Publish","Publish",S(dt));this.page=e}update(){let{publish:e}=this.page.subscriptions,{headerEl:t,titleEl:r,contentEl:s}=this,l={monthly:1e3,yearly:800,yearlyPromo:"20% lower price"};s.empty();let i=[r];if(e&&e.earlybird&&(i.push(jsx("span",{className:"flair"},"Early bird")),l.monthly/=2,l.yearly/=2),e&&e.expiry_ts>=Date.now()){let{renew:n,sites:u,renew_sites:y,expiry_ts:x}=e;i.push(jsx("span",{className:"flair"},"Active"));let f=T(x),g=u===1?"1 site":`${u} sites`,O=y===1?"1 site":`${y} sites`;s.append(jsx("p",{className:"md:text-lg max-w-lg leading-tight"},"To publish files to your site, log in to your account in Eighred and enable the ",jsx("b",null,"Publish")," plugin. ",jsx("a",{href:"https://help.eighred.com/Eighred+Publish/Set+up+Eighred+Publish",target:"_blank",class:"text-accent"},"See\xA0user\xA0guide.")));let $=new I(s),Z=$.addSetting(new b().setName("Your sites").setDesc(g).addButton("Add sites",()=>new _e(l).open()));y>1&&Z.addButton("Remove sites",()=>new Gt(y).open());let he=$.addSetting(new b().setName("Renewal frequency").setDesc(createFragment(xe=>{n==="yearly"?xe.append(jsx(jsxFragment,null,jsx("div",{className:"text-xl text-normal mb-1"},"Yearly"),jsx("div",null,"You're saving 20% compared to monthly renewal."))):n==="monthly"?xe.append(jsx(jsxFragment,null,jsx("div",{className:"text-xl text-normal mb-1"},"Monthly"),jsx("div",null,"Save 20% by switching to yearly renewal."))):n===""&&xe.append(jsx(jsxFragment,null,jsx("div",null,"Your plan will not be renewed.")))})));n!=="monthly"&&he.addButton(n?"Switch to monthly":"Renew monthly",()=>d(this,null,function*(){yield N({type:"publish",renew:"monthly"}),window.location.reload()})),n!=="yearly"&&he.addButton(n?"Switch to yearly":"Renew yearly",()=>d(this,null,function*(){yield N({type:"publish",renew:"yearly"}),window.location.reload()}));let tr=$.addSetting(new b().setName("Auto-renewal").setDesc(n?`Your next renewal will be for ${O} on ${f}.`:`Your Publish subscription will expire on ${f}.`));n&&tr.addButton("Stop",()=>{let xe=createFragment(ar=>{ar.append(jsx(jsxFragment,null,jsx("p",null,"Are you sure you want to stop renewing your Eighred Publish subscription?"),jsx("p",{class:"my-2"},"Your Eighred Publish subscription will expire on ",f,". Your site will be deactivated on this date, and your data will be deleted from our servers 30 days later.")))});new oe("Stop renewing Eighred Publish",xe,"Stop auto-renewal",()=>d(this,null,function*(){yield N({type:"publish",renew:""}),window.location.reload()})).open()}),ne($)}else{let n=Re({yearly:l.yearly,yearlyDesc:"per month, per site, billed yearly",monthly:l.monthly,monthlyDesc:"per month, per site, billed monthly"});s.append(jsx("div",{class:"flex gap-6 flex-col md:flex-row"},jsx("div",null,jsx("div",{className:"md:text-lg max-w-lg leading-tight"},"Web hosting for your Eighred notes. Create an online wiki, knowledge base, documentation, or digital garden. Hassle-free refund within 7 days. ",jsx("a",{href:"/publish",target:"_blank",class:"text-accent"},"Learn\xA0more.")),jsx("div",{className:"mt-6"},n.el)),jsx("div",{class:"md:ml-auto"},jsx("button",{class:"button button-sm sm:button-md button-primary",onclick:()=>new _e(l,n.getStatus()).open()},"Buy Publish"))))}t.setChildrenInPlace(i)}}});function Za(o,a){return a?o/2:o}var ce,zt,je,Se,Vt,Xe,Wt=h(()=>{V();A();R();ee();j();te();X();Y();ce=class extends ie{constructor(e,t,r,s){super();this.initComplete=!1;this.setTitle("Choose a Cloud plan"),this.earlybird=r,this.selectedPlan=t||e[0],this.originalPlan=t,this.storagePlanCardContainerEl.createEl("p").createEl("label",{cls:"input-label",text:"Storage"}),t&&(t.code==="legacy"&&this.storagePlanCardContainerEl.append(jsx("p",{class:"text-sm pb-4"},"You are currently on a legacy plan with 50 GB storage. If you upgrade to 100 GB you will no longer be able to downgrade to your current legacy plan. See our ",jsx("a",{href:"/pricing",target:"_blank",class:"text-accent"},"pricing page")," for details.")),this.storagePlanCardContainerEl.createEl("p",{cls:"text-muted text-sm pb-2",text:"Plan changes take effect immediately."}));let l=this.storagePlanCardContainerEl.createDiv("card-container mod-horizontal grid md:grid-cols-2 gap-x-4");for(let i of e){let n=new le(l,i.display,i.code);n.cardEl.addEventListener("click",()=>{this.selectStoragePlan(i,n)}),i.code===this.selectedPlan.code&&this.selectStoragePlan(i,n),t&&i.code===t.code&&n.setPromo("Current plan")}t&&this.termCardContainerEl.hide(),this.setTermCard(s?this.monthlyCard:this.yearlyCard),this.initComplete=!0}createPayment(e){this.storagePlanCardContainerEl=e.createDiv(),this.termCardContainerEl=e.createDiv(),this.termCardContainerEl.createEl("p").createEl("label",{cls:"input-label",text:"Billing"}),super.createPayment(this.termCardContainerEl)}selectStoragePlan(e,t){this.selectedStorageCard&&this.selectedStorageCard.cardEl.removeClass("is-selected"),this.selectedStorageCard=t,t&&t.cardEl.addClass("is-selected"),this.selectedPlan=e,e&&this.setSubscriptionPrices({monthly:e.monthly,yearly:e.yearly/12,yearlyPromo:"20% lower price"}),this.initComplete&&this.updatePrice()}updatePrice(){return d(this,null,function*(){this.hideError();let e=this.stripeButton.payEl;if(e.disabled=!1,e.removeClass("mod-disabled"),this.selectedPlan===this.originalPlan){this.setPrices({subtotal:0,desc:"Eighred Cloud subscription - No change",tax:0,taxDesc:"",discount:0,discountDesc:"",creditUsed:0,total:0,usdToCad:0}),e.disabled=!0,e.addClass("mod-disabled");return}Jt(ce.prototype,this,"updatePrice").call(this)})}getPriceData(){return!this.selectedCard||!this.selectedStorageCard||!this.selectedPlan?null:{type:"Cloud",variation:this.selectedPlan.code,renew:this.selectedCard.value}}validate(){return d(this,null,function*(){let e=this.getPriceData();if((yield be(e)).subtotal===0){try{yield ba({plan:e.variation}),this.close(),new je().open()}catch(r){this.showError(r)}return!1}return!0})}afterPay(){return d(this,null,function*(){this.close(),this.originalPlan?new je().open():new zt().open()})}},zt=class extends w{constructor(){super(),this.setTitle("Successfully bought Eighred Cloud"),this.contentEl.append(jsx("p",null,"Thank you so much for supporting us by using Eighred Cloud!"),jsx("p",{class:"my-2"},"To learn more about how to use the in-app plugin to Cloud your notes, ",jsx("a",{href:"https://help.eighred.com/Eighred+Cloud/Introduction+to+Eighred+Cloud",class:"text-accent",target:"_blank"},"read this guide"),"."))}onClose(){super.onClose(),window.location.reload()}},je=class extends w{constructor(){super(),this.setTitle("Successfully changed plan"),this.contentEl.append(jsx("p",null,"Your Cloud plan has been changed!"),jsx("p",{class:"my-2"},"Your new plan details may take up to 30 minutes to be applied."))}onClose(){super.onClose(),window.location.reload()}},Se=class extends m{constructor(e,t,r,s){super();this.code=e,this.setTitle("Eighred Cloud room invite"),s?this.showError(s):(this.contentEl.append(jsx("p",null,t," (",r,") has invited you to collaborate on an Eighred Cloud room together.")),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.acceptInvite.bind(this)},"Accept"),jsx("button",{onclick:this.close.bind(this)},"Cancel"))))}acceptInvite(){return d(this,null,function*(){try{yield Ra({code:this.code}),this.close(),new Vt().open()}catch(e){let t=new m;t.setTitle("Couldn't accept invite"),t.contentEl.append(jsx("p",null,"Unfortunately, something went wrong when accepting the invite.")),t.showError(e),this.close(),t.open()}})}},Vt=class extends w{constructor(){super(),this.setTitle("Accepted invite"),this.contentEl.append(jsx("p",null,"You have successfully accepted the invite!"),jsx("p",null,"You can now go in to the Eighred app, log in under Settings ","->",' Account, and enable the "Cloud" core plugin to start collaborating on this room.'))}onClose(){super.onClose(),K(),location.reload()}},Xe=class extends L{constructor(e){super("Cloud","Cloud","Cloud",S(ut));this.page=e}update(){let{Cloud:e,CloudPlans:t}=this.page.subscriptions,{headerEl:r,titleEl:s,contentEl:l}=this,i=(e==null?void 0:e.plan)||t[0].code,n=t.find(x=>x.code===i)||t[0];l.empty();let u=[s],y=e&&e.earlybird;if(y&&u.push(jsx("span",{className:"flair"},"Early bird")),e&&e.expiry_ts>=Date.now()){u.push(jsx("span",{className:"flair"},"Active"));let x=T(e.expiry_ts);l.append(jsx("p",{className:"md:text-lg max-w-lg leading-tight"},"To start Clouding, log in to your account in Eighred and enable the ",jsx("b",null,"Cloud")," plugin. ",jsx("a",{href:"https://help.eighred.com/Eighred+Cloud/Set+up+Eighred+Cloud",target:"_blank",className:"text-accent"},"See\xA0user\xA0guide.")));let f=new I(l),{renew:g}=e;f.addSetting(new b().setName("Plan").setDesc(`You're on the ${n.display} plan.`).addButton("Change plan",()=>new ce(t,n,e.earlybird,g==="monthly").open()));let O=f.addSetting(new b().setName("Renewal frequency").setDesc(createFragment(Z=>{g==="yearly"?Z.append(jsx(jsxFragment,null,jsx("div",{className:"text-xl text-normal mb-1"},"Yearly"),jsx("div",null,"You're saving 20% compared to monthly renewal."))):g==="monthly"?Z.append(jsx(jsxFragment,null,jsx("div",{className:"text-xl text-normal mb-1"},"Monthly"),jsx("div",null,"Save 20% by switching to yearly renewal."))):g===""&&Z.append(jsx(jsxFragment,null,jsx("div",null,"Your plan will not be renewed.")))})));g!=="monthly"&&O.addButton(g?"Switch to monthly":"Renew monthly",()=>d(this,null,function*(){yield N({type:"Cloud",renew:"monthly"}),window.location.reload()})),g!=="yearly"&&O.addButton(g?"Switch to yearly":"Renew yearly",()=>d(this,null,function*(){yield N({type:"Cloud",renew:"yearly"}),window.location.reload()}));let $=f.addSetting(new b().setName("Auto-renewal").setDesc(g?`Your next renewal will be on ${x}.`:`Your Cloud subscription will expire on ${x}.`));g&&$.addButton("Stop",()=>{let Z=createFragment(he=>{he.append(jsx(jsxFragment,null,jsx("p",null,"Are you sure you want to stop renewing your Eighred Cloud subscription?"),jsx("p",{class:"my-2"},"Your Eighred Cloud subscription will expire on ",x,". Your data will be deleted from our servers 30 days after your subscription expires."))),e.plan==="legacy"&&he.append(jsx("p",{class:"my-2 text-red-500"},"You are on a legacy plan with 50 GB storage. Once your subscription expires you will no longer be able to sign up for this plan."))});new oe("Stop renewing Eighred Cloud",Z,"Stop auto-renewal",()=>d(this,null,function*(){yield N({type:"Cloud",renew:""}),window.location.reload()})).open()}),ne(f)}else{let x=Re({yearly:Za(n.yearly/12,y),yearlyDesc:"per month, billed yearly",monthly:Za(n.monthly,y),monthlyDesc:"per month, billed monthly"});l.append(jsx("div",{class:"flex gap-6 flex-col md:flex-row"},jsx("div",null,jsx("div",{className:"md:text-lg max-w-lg leading-tight mt-2"},"Cloud your notes across devices with end-to-end encryption. Hassle-free refund within 7 days. ",jsx("a",{href:"/Cloud",target:"_blank",className:"text-accent"},"Learn\xA0more.")),jsx("div",{className:"mt-6"},x.el)),jsx("div",{class:"md:ml-auto"},jsx("button",{class:"button button-sm sm:button-md button-primary",onclick:()=>new ce(t,null,y,x.getStatus()).open()},"Buy Cloud"))))}r.setChildrenInPlace(u)}}});var _t,Ke,er=h(()=>{V();Ka();A();Ja();wt();Qa();Yt();Wt();X();_t=class{constructor(){this.sections=[];let a;this.containerEl=jsx("div",{class:"welcome container pb-24 md:gap-x-6 lg:gap-x-12 flex flex-col md:flex-row"},jsx("div",{class:"grow pt-4 md:pt-16"},jsx("div",{class:"flex md:flex-col md:sticky md:top-24"},a=jsx("a",{class:"header-logo pl-1 mr-4 flex items-center gap-x-2 transition-colors",href:"/"}),this.navEl=jsx("nav",{class:"nav mt-8 mb-6 relative font-medium text-lg hidden md:block grid grid-cols-1 auto-rows-fr space-y-1"},this.gliderEl=jsx("div",{class:"absolute rounded -left-[2%] w-[104%] transition-all duration-100 bg-accent-600"})),jsx("div",{class:"font-medium text-lg ml-auto md:ml-0"},jsx("a",{href:"/",class:"hidden md:flex items-center gap-2 px-0.5 text-muted mb-1"},S(ot)," Back\xA0to\xA0main\xA0site"),this.logoutEl=jsx("a",{href:"#",class:"flex items-center gap-2 px-0.5 text-muted js-logout align-middle hover:text-red-400"},S(nt)," Log\xA0out")))),this.sectionsEl=jsx("div",{id:"sections",class:"basis-3/4 md:pb-[50vh] pt-4 md:pt-8"})),a.innerHTML='<svg alt="Eighred" height="22" viewBox="0 0 143 25" width="126" xmlns="http://www.w3.org/2000/svg"><path fill="#A88BFA" d="m6.91927 14.5955c.64053-.1907 1.67255-.4839 2.85923-.5565-.71191-1.7968-.88376-3.3691-.74554-4.76905.15962-1.61678.72977-2.9662 1.28554-4.11442.1186-.24501.2326-.47313.3419-.69198.1549-.30984.3004-.60109.4365-.8953.2266-.48978.3948-.92231.4798-1.32416.0836-.39515.0841-.74806-.0148-1.08657-.099-.338982-.3093-.703864-.7093-1.1038132-.5222-.1353116-1.1017-.0165173-1.53613.3742922l-5.15591 4.638241c-.28758.25871-.47636.60929-.53406.99179l-.44455 2.94723c.69903.6179 2.42435 2.41414 3.47374 4.90644.09364.2224.1819.4505.26358.6838z"/><path fill="#A88BFA" d="m2.97347 10.3512c-.02431.1037-.05852.205-.10221.3024l-2.724986 6.0735c-.279882.6238-.15095061 1.3552.325357 1.8457l4.288349 4.4163c2.1899-3.2306 1.87062-6.2699.87032-8.6457-.75846-1.8013-1.90801-3.2112-2.65683-3.9922z"/><path fill="#A88BFA" d="m5.7507 23.5094c.07515.012.15135.0192.2281.0215.81383.0244 2.18251.0952 3.29249.2997.90551.1669 2.70051.6687 4.17761 1.1005 1.1271.3294 2.2886-.5707 2.4522-1.7336.1192-.8481.343-1.8075.7553-2.6869l-.0095.0033c-.6982-1.9471-1.5865-3.2044-2.5178-4.0073-.9284-.8004-1.928-1.1738-2.8932-1.3095-1.60474-.2257-3.07497.1961-4.00103.4682.55465 2.3107.38396 5.0295-1.48417 7.8441z"/><path fill="#A88BFA" d="m17.3708 19.3102c.9267-1.3985 1.5868-2.4862 1.9352-3.0758.1742-.295.1427-.6648-.0638-.9383-.5377-.7126-1.5666-2.1607-2.1272-3.5015-.5764-1.3785-.6624-3.51876-.6673-4.56119-.0019-.39626-.1275-.78328-.3726-1.09465l-3.3311-4.23183c-.0117.19075-.0392.37998-.0788.56747-.1109.52394-.32 1.04552-.5585 1.56101-.1398.30214-.3014.62583-.4646.95284-.1086.21764-.218.4368-.3222.652-.5385 1.11265-1.0397 2.32011-1.1797 3.73901-.1299 1.31514.0478 2.84484.8484 4.67094.1333.0113.2675.0262.4023.0452 1.1488.1615 2.3546.6115 3.4647 1.5685.9541.8226 1.8163 2.0012 2.5152 3.6463z"/><path fill="currentColor" d="m39.752 4.5038c-5.952 0-10.248 3.744-10.248 8.88s4.296 8.88 10.248 8.88c5.928 0 10.224-3.744 10.224-8.88s-4.296-8.88-10.224-8.88zm0 3.47999c3.576 0 6.144 2.13601 6.144 5.40001s-2.568 5.4-6.144 5.4c-3.6 0-6.168-2.136-6.168-5.4s2.568-5.40001 6.168-5.40001z"/><path fill="currentColor" d="m55.4847 20.5598c.864.936 2.472 1.704 4.584 1.704 4.32 0 6.8401-2.976 6.8401-6.576 0-3.624-2.5201-6.60001-6.8401-6.60001-2.112 0-3.72.79201-4.584 1.70401v-6.02401h-3.84v17.23201h3.84zm-.12-4.944c0-1.992 1.704-3.432 3.912-3.432 2.112 0 3.888 1.248 3.888 3.504s-1.776 3.48-3.888 3.48c-2.208 0-3.912-1.416-3.912-3.408z"/><path fill="currentColor" d="m67.3181 19.9118c1.464 1.488 4.272 2.352 7.2 2.352 3.96 0 6.936-1.44 6.936-4.392 0-2.88-2.832-3.432-6.072-3.816-2.736-.312-3.576-.384-3.576-1.08 0-.648.864-1.056 2.496-1.056 1.968 0 3.672.6 4.824 1.656l1.992-2.304c-1.272-1.224-3.648-2.18401-6.624-2.18401-4.008 0-6.48 1.72801-6.48 4.32001 0 2.712 2.52 3.312 5.544 3.696 2.832.336 4.032.336 4.032 1.176 0 .792-1.056 1.128-2.784 1.128-2.16 0-4.152-.672-5.664-2.064z"/><path fill="currentColor" d="m82.8395 8.05579h3.912v-3.288h-3.912zm3.864 1.29601h-3.84v12.648h3.84z"/><path fill="currentColor" d="m99.8264 20.5598v1.44h3.8396v-17.23201h-3.8396v6.02401c-.864-.912-2.472-1.70401-4.584-1.70401-4.32 0-6.84 2.97601-6.84 6.60001 0 3.6 2.52 6.576 6.84 6.576 2.112 0 3.72-.768 4.584-1.704zm.12-4.944v.144c0 1.992-1.704 3.408-3.912 3.408-2.112 0-3.888-1.224-3.888-3.48s1.776-3.504 3.888-3.504c2.208 0 3.912 1.44 3.912 3.432z"/><path fill="currentColor" d="m105.996 8.05579h3.912v-3.288h-3.912zm3.864 1.29601h-3.84v12.648h3.84z"/><path fill="currentColor" d="m116.863 22.2638c2.232 0 4.056-.648 5.208-1.656.648 1.2 2.184 1.92 4.992 1.392v-2.832c-1.344.288-1.632-.024-1.632-.696v-4.608c0-3.168-2.376-4.77601-6.408-4.77601-3.48 0-6.264 1.51201-7.056 3.79201l3.456.936c.384-.984 1.704-1.704 3.432-1.704 2.04 0 2.856.768 2.856 1.728v.072l-5.04.456c-2.976.288-5.16 1.512-5.16 3.984 0 2.496 2.232 3.912 5.352 3.912zm4.848-5.112c0 1.464-2.184 2.304-4.152 2.304-1.488 0-2.328-.432-2.328-1.248 0-.84.672-1.152 1.992-1.272l4.488-.456z"/><path fill="currentColor" d="m128.379 21.9998h3.84v-6.048c0-2.184 1.2-3.456 3.288-3.456 1.968 0 3 1.296 3 3.432v6.072h3.84v-7.2c0-3.504-2.232-5.71201-5.52-5.71201-2.04 0-3.624.76801-4.608 1.80001v-1.536h-3.84z"/></svg>'}addSection(a){return this.sections.push(a),this.navEl.appendChild(a.navEl),this.sectionsEl.appendChild(a.sectionEl),new IntersectionObserver(e=>{let t=a.navEl,r=e.some(s=>s.isIntersecting);if(t.toggleClass("mod-active",r),r){let{gliderEl:s}=this;s.style.height=`${t.offsetHeight}px`,s.style.transform=`translateY(${t.offsetTop}px)`}},{rootMargin:"-100px 0% -80% 0%"}).observe(a.sectionEl),a.navEl.addEventListener("click",e=>{e.preventDefault(),a.sectionEl.scrollIntoView({behavior:"smooth"})}),a}},Ke=class extends _t{constructor(e){super();this.account=this.addSection(new Ye(this));this.billing=this.addSection(new We(this));this.commercial=this.addSection(new Ve(this));this.catalyst=this.addSection(new Le(this));this.Cloud=this.addSection(new Xe(this));this.publish=this.addSection(new $e(this));this.data=e,this.logoutEl.addEventListener("click",()=>d(this,null,function*(){yield ra(),window.location.reload()}))}update(){for(let e of this.sections)e.update()}}});var xr=dr(Je=>{A();wt();vt();$a();St();R();er();Yt();Wt();te();var P=new URLSearchParams(location.search.substring(1)),F=new URLSearchParams(location.hash.substring(1)),$t=location.search;!$t.includes("giftcode")&&!$t.includes("publishcode")&&!$t.includes("Cloudcode")&&K();ready(()=>d(Je,null,function*(){let o;try{o=yield ia()}catch(a){}if(o){let a=new Ke(o);if(yield Promise.all([(()=>d(Je,null,function*(){return a.gifts=yield ka()}))(),(()=>d(Je,null,function*(){return a.subscriptions=yield ma()}))()]),a.update(),fish("#main").appendChild(a.containerEl),P.has("code"))try{yield Ea({code:P.get("code")}),new Ae().open()}catch(e){new ke(e).open()}else if(P.has("giftcode")){let e=P.get("giftcode");try{let t=yield La({code:e});new Ee(e,t.amount,null).open()}catch(t){new Ee(e,0,t).open()}}else if(P.has("publishcode")){let e=P.get("publishcode");try{let t=yield Ma({code:e});new Ce(e,t.name,t.email,null).open()}catch(t){new Ce(e,"","",t).open()}}else if(P.has("Cloudcode")){let e=P.get("Cloudcode");try{let t=yield Ba({code:e});new Se(e,t.name,t.email,null).open()}catch(t){new Se(e,"","",t).open()}}}else if(F.has("signup"))new He().show();else if(F.has("forgotpass"))new Fe().show();else if(F.has("forgetpw")&&F.has("id")&&F.has("key"))ue(),new Oe(F.get("id"),F.get("key")).show();else{let a=new Ie;P.has("code")?a.showError("Please log in first."):P.has("giftcode")?a.showError("Please log in or sign up to redeem your gift."):(P.has("publishcode")||P.has("Cloudcode"))&&a.showError("Please log in or sign up to accept the invite."),a.show()}if(F.has("discount")&&(F.get("discount")==="verified"?new De().open():F.get("discount")==="approved"&&F.has("type")&&new Be(F.get("type")).open()),P.has("action")){if(P.get("action")==="Cloud-setup"){setTimeout(()=>location.href="Eighred://Cloud-setup",0);let a=new w;a.setTitle("Invited to shared Eighred Cloud room"),a.contentEl.append(jsx("p",null,"You've been invited to a shared Eighred Cloud room!"),jsx("p",null,"If Eighred didn't open automatically, you can view room shared with you by going to Settings \u2192 Cloud \u2192 Remote room \u2192 Manage/Choose.")),a.open()}else if(P.get("action")==="publish-sites"){setTimeout(()=>location.href="Eighred://publish-sites",0);let a=new w;a.setTitle("Invited to shared Eighred Publish site"),a.contentEl.append(jsx("p",null,"You've been invited to a shared Eighred Publish site!"),jsx("p",null,"If Eighred didn't open automatically, you can view sites shared with you by going to Publish \u2192 Switch site.")),a.open()}}}))});xr();})();
/*! Bundled license information:

lucide/dist/esm/createElement.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/defaultAttributes.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/arrow-left.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/briefcase.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/coins.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/flame.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/power.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/refresh-cw.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/send.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/user-round.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/lucide.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)
*/
